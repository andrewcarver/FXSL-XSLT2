<html>
<head>
<meta http-equiv="Content-Type"
content="text/html; charset=windows-1252" />
<title>Dynamic Functions using FXSL: Composition, Partial Applications
and Lambda Expressions</title>
<meta NAME='description' CONTENT='Dynamic Functions using FXSL: Composition,
Partial Applications
and Lambda Expressions'>
<style type="text/css">
 p.c6 {font-style: italic; font-weight: bold}
 p.c5 {font-weight: bold}
 p.c4 {font-family: courier new; font-weight: bold}
 p.c3 {font-style: italic}
 p.c2 {font-family: courier new}
 p.c1 {text-align: left}
 font.c {font-family: courier new}
 font.t {font-family: times new roman}
</style>
</head>
<body>
<table border="0" cellspacing="0" width="100%">
 <tr>
<td width="100%">


<!-- Navigation --><table border="0" cellpadding="1" cellspacing="1"
width="100%"><tr>
<td valign="top" align="right">
<p>&nbsp;</p>
</td>
<td valign="top" align="right" width="150">
&nbsp;&nbsp;</td></tr></table><table align="right" cellPadding="0"
cellSpacing="0" class="tablelayout" width="30%">
<tr> <th align="middle" width="100%">Table of Contents</th></tr><tr><td
bgColor="#ececff" width="100%"><br> <font size="1"><IMG border="0" height="11"
src="condensed.gif" width="11">&nbsp;<A href="#Introduction"><font
size="1">Introduction</font></a><br>
 <font size="1">•&nbsp;</font><A
href="#1._Functional_composition,_curried_functions,_partial_applications_and_lambda_expressions."><font size="1">1. Functional composition,
curried functions, partial
applications and lambda expressions.</font></a><br>
 <font size="1">•&nbsp;</font><A
href="#2._Implementation_of_functional_composition_in_XSLT._Examples."><font size="1">2. Implementation of functional composition in XSLT.
Examples.</font></a><br>
 <font size="1">•&nbsp;</font><A
href="#3._Implementation_of_currying_and_partial_application_in_XSLT."><font size="1">3. Implementation of currying and partial application in
XSLT.</font></a><br>
 <font size="1">•&nbsp;</font><A
href="#4._Using_currying_and_partial_application_-_the_iter_and_power_functions."><font size="1">4. Using currying and partial application - the iter
and power
functions.</font></a><br>
 <font size="1">•&nbsp;</font><A
href="#5._Creating_a_new_function_dynamically_-_the_calculator_store_problem."><font size="1">5. Creating a new function dynamically - the calculator_store_problem.</font></a><br>
 <font size="1">•&nbsp;</font><A href="#Conclusion"><font
size="1">Conclusion</font></a><br>
 <font size="1">•&nbsp;</font><A href="#Resources"><font
size="1">Resources</font></a><br>
 <br><br></font></font></td></tr></table>
<h1>Dynamic Functions using FXSL: Composition, Partial Applications
and Lambda Expressions</h1>

<p class="c1"><a href="/members/profile.asp?id=i1005">Dimitre
Novatchev</a>, February 2002</p>

<p>This article is a follow-up from the recent publication "<i><a
href="../FuncProg/Functional Programming.html" target="_blank">The Functional Programming
Language XSLT</a></i>". Provided here is the answer to a FAQ about
functional programming in XSLT: <i>Can functions be created
dynamically during run-time and what are some general ways to
achieve this</i>?. Using the XSLT functional programming library <strong>FXSL</strong>,
examples are given of performing functional composition, currying
and partial application of functions, as well as of dynamically
creating a function, which corresponds to a lambda expression.</p>

<br />
<p></p><p>The source code for this article is part of the <b>FXSL</b> library version 1.1 
and can be downloaded <a href="http://sourceforge.net/project/showfiles.php?group_id=53841">here</a>:</p>
<p><a href="http://prdownloads.sourceforge.net/fxsl/fxsl-MS-1.1.zip?download">
<img border="0" src="zip.jpg"></a>&nbsp;
Using MSXML?&nbsp; <a href="http://prdownloads.sourceforge.net/fxsl/fxsl-MS-1.1.zip?download">Get the MSXML source code!</a></p>

<p><a href="http://prdownloads.sourceforge.net/fxsl/fxsl-Saxon-1.1.zip?download"><img border="0" src="zip.jpg"></a>&nbsp;
Using SAXON?&nbsp; <a href="http://prdownloads.sourceforge.net/fxsl/fxsl-Saxon-1.1.zip?download">Get the SAXON source code!</a></p>

<p><a href="http://prdownloads.sourceforge.net/fxsl/fxsl-Xalan-1.1.zip?download"><img border="0" src="zip.jpg"></a>&nbsp;
Using XALAN?&nbsp; <a href="http://prdownloads.sourceforge.net/fxsl/fxsl-Xalan-1.1.zip?download">Get the XALAN source code as adapted by Knut Wannheden !</a></p>

<h2><a name="Introduction">Introduction</a></h2>

<p>In a recent article <a href="#Res-1">[1]</a>, an XSLT implementation was provided for
higher-order functions and most of the major functional programming
design patterns and functions, e.g. as provided in Haskell's
Prelude or in John Hughes' article "<i>Why Functional Programming
Matters</i>" <a href="#Res-2">[2]</a>. The response has been overwhelming, and the first
page of the article was accessed more than 1200 times in just three
days, the <i>XSLT Functional Programming Library <b>FXSL</b></i>
<a href="#Res-3">[3]</a> was downloaded many hundreds times and a new edition of FXSL
(for Xalan) was spontaneously produced by an enthusiastic
reader.</p>

<p>Despite this spontaneous acceptance, there are more steps to go
until we reach a state, in which programmers will feel comfortable
and fully conversant in using the functional programming style and
techniques in XSLT:</p>

<ul type="disc">
<li>The FXSL library should include even more FP design patterns
and functions.</li>

<li>FXSL documentation should be provided.</li>

<li>XSLT programmers need to be educated in using the FP style and
techniques.</li>
</ul>

<p>An indication of the last need is the following frequently asked
question: "Can functions be created dynamically during run-time and
what are some general ways to achieve this?" The rest of this
article provides the answer to this question.</p>

<h2><a name="1._Functional_composition,_curried_functions,_partial_applications_and_lambda_expressions.">1. Functional composition, curried
functions, partial
applications and lambda expressions.</a></h2>

<p>We start by formally defining a number of important concepts as
follows:</p>

<p><i>Functional composition</i>.</p>

<p>The definition of functional composition is as follows:</p>

<p>Given two functions:</p>

<p class="c2">&nbsp;g :: a -&gt; b&nbsp; &nbsp;and&nbsp;&nbsp; f ::
b -&gt; c</p>

<p>Their functional composition is defined as:</p>

<p class="c2">(.) :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; (a -&gt;
c)</p>

<p class="c2">(f . g) x = f (g x)</p>

<p>This means that given two functions <font class="c">f</font> and <font class="c">g</font>, <font class="c">(.)</font> glues them
together by applying <font class="c">f</font> on the result of applying <font class="c">g</font>.</p>

<p><font class="c">(.)</font> is completely polymorphic, the only constraint on the types
of <font class="c">f</font> and <font class="c">g</font> being that the type of the result of <font class="c">g</font> 
must be the same as the type of the argument of <font class="c">f</font>.</p>

<p>Functional composition is one of the most often used ways of
producing a new function by applying two other functions in a
successive pipe-like manner.</p>

<p><i>Curried functions</i>.</p>

<p>There are two ways of looking at a function that has more than
one argument. For example, we could have:</p>

<p class="c2"><br />
f(x, y) = x * y&nbsp;&nbsp;&nbsp;&nbsp; (1)<br />
<br />
</p>

<p>or<br />
<br />
</p>

<p class="c2">f x y&nbsp;&nbsp; = x * y&nbsp;&nbsp;&nbsp;&nbsp;
(2)</p>

<p>The first expression above defines a function that takes
a <i>pair</i> of arguments and produces their product.</p>

<p>In contrast, the second definition allows the function <font class="c">f</font> to take
its arguments one at a time. It is perfectly possible to have the
expression:</p>

<p class="c2">f x</p>

<p>Not providing the second argument in this concrete case results
in a new function <font class="c">g</font> of one argument, defined bellow:</p>

<p class="c2">g y&nbsp; =&nbsp; x * y</p>

<p>Defining a function as in <font class="c">(2)</font> has the following advantages:</p>

<ul type="disc">
<li>A uniform form of expressing function application over one or
many arguments - we write: <font class="c"><br />f x,&nbsp;&nbsp; f x y,&nbsp;&nbsp; f x
y z, ...</font> etc.</li>

<li>The ability to easily produce partial functions, resulting from
applying a function only on the first several of its arguments. For
example, we can also define the function <font class="c">g</font> above as <font class="c">(x *)</font> - a
partial application of multiplication, in which the first argument
has been bound to the value <font class="c">x</font>.</li>
</ul>

<p>A function as defined in <font class="c">(2)</font> can be regarded as having just one
argument <font class="c">x</font>, and returning a function of <font class="c">y</font>.</p>

<p>Functions defined as in <font class="c">(2)</font> are called <i>curried</i> functions
after Haskell Curry, who was one of the developers of the lambda
calculus, and after whom the Haskell programming language was
named.</p>

<p>Functions defined as in <font class="c">(1)</font> are called <i>uncurried</i>.
Uncurried functions can be turned into curried ones by the curry
function, and curried functions can be turned into uncurried ones
by the uncurry function. Here's how <font class="c">curry</font> and <font class="c">uncurry</font> 
are defined in the Haskell Prelude:</p>

<p class="c2">curry&nbsp; f x y&nbsp; =&nbsp; f(x,y)</p>

<p class="c2">uncurry f (x, y) = f x y</p>

<p class="c3">&nbsp;</p>

<p><i>Partial applications</i>.</p>

<p>A <i>partial application</i> is a function returned by any
application of a curried function on the first several, but not all
of its arguments. For example:</p>

<p class="c2">incr&nbsp; = (1 +)</p>

<p class="c2">double = (2 *)</p>

<p>As defined above, <font class="c">incr</font> is a function that adds one to its
argument, and <font class="c">double</font> is a function that multiplies its argument by
2.</p>

<p>Partial application in the special case when the function is an
operator is called an <i>operator section</i>. <font class="c">(1 +)</font> and <font class="c">(2 *)</font>
above are examples of operator sections.</p>

<p>Using partial applications it is possible to simplify
considerably many function definitions, which results in shorter,
simpler, more understandable and maintainable code. For example,
instead of defining <font class="c">sum</font> and <font class="c">product</font> as:</p>

<p class="c2">sum&nbsp;&nbsp; xs&nbsp;&nbsp; =&nbsp; foldl (+) 0
xs</p>

<p class="c2">product xs =&nbsp; foldl (*) 1 xs</p>

<p>it is possible to define them in an equivalent and much simpler
way by omitting the last identically-named argument(s) from both
sides of the definition:</p>

<p class="c2">sum&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&nbsp; foldl (+)
0</p>

<p class="c2">product&nbsp; =&nbsp; foldl (*) 1</p>

<p>Producing partial applications is one of the most flexible and
powerful ways of creating dynamically new functions.</p>

<p><i>Lambda expressions</i>.</p>

<p>A lambda expression (also known as anonymous function) is a
concept derived directly from Church's lambda calculus <a href="#Res-4">[4]</a>. The
following are examples of lambda expressions:</p>

<p class="c2">\x -&gt; x + 1</p>

<p class="c2">\x y&nbsp; -&gt;&nbsp; x * y</p>

<p>The first expression above defines a (anonymous) function, which
increments its argument.</p>

<p>The second expression above defines a (anonymous) function,
which calculates the product of its two arguments.</p>

<p>Any partial application can be expressed as a lambda expression.
For example:</p>

<p class="c2">(f x ) y =&nbsp; \y -&gt; (f x) y</p>

<p>expresses the partial application of &nbsp;<font class="c">f x</font></p>

<p>The reverse is not true - lambda expressions are more powerful
and can define functions, which are not partial applications. For
example:</p>

<p class="c2">\x -&gt; f x y</p>

<p>is not a partial application, because it is a function of the
first argument <font class="c">x</font>, while the second argument (not the first!) is
bound to the value <font class="c">y</font>.</p>

<p>Lambda expressions are useful in all cases when it is not
necessary to name a function (e.g. when the function is to be used
only locally, or is dynamically created) but just to apply it. An
example is often the case with functions to be used with the <font class="c">map</font>
function:</p>

<p class="c2">map (\x -&gt; x+3/3) xs</p>

<h2><a name="2._Implementation_of_functional_composition_in_XSLT._Examples.">2. Implementation of functional composition in XSLT.
Examples.</a></h2>

<p>It is almost straightforward to implement functional composition
in XSLT, as can be seen from the source bellow. The named template
<b><font class="c">compose</font></b> has three parameters, two of which are the functions
to be composed - <font class="c">pFun1</font> and <font class="c">pFun2</font> (these are actually template
references), and the third is the argument <font class="c">pArg1</font>, on which <font class="c">pFun2</font>
will be applied.</p>

<p>compose.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="70%" bgcolor="#E1F4F4">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #E1F4F4;"><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">version</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; 
</span><span style="color: #FF0000; background-color: #E1F4F4;">xmlns:xsl</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #FF0000; background-color: #E1F4F4; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
</span><span style="color: #FF0000; background-color: #E1F4F4;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #FF0000; background-color: #E1F4F4; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">compose</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">vrtfFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$pFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">        &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$pFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
                      </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">msxsl:node-set($vrtfFun2)/node()</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
&lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span></pre>
</table>

<p>In many cases there are more than two functions that should be
successively applied, each using as its argument the result
returned from the previous function. In any such case it would be
inconvenient or even impossible (e.g. the number of functions to be
composed is not known in advance) to compose the functions two at a
time.</p>

<p>Therefore, we also provide the definition of a function, which
takes two arguments: a list of functions and an argument on which
the last function in the list is to be applied, and produces the
result of the functional composition of all functions, using that
argument:</p>

<p class="c2">multiCompose x [f]&nbsp; =&nbsp; f x</p>

<p class="c2">multiCompose x [f:fs] = f (multiCompose x fs)</p>

<p>Using the <font class="c">foldr</font> function and the function application operator <font class="c">$
(f $ x = f x)</font> we can define the <font class="c">multiCompose</font> function as
follows:</p>

<p class="c2">multiCompose y fs = foldr ($) y fs</p>

<p>or even simpler:</p>

<p class="c2">multiCompose y&nbsp;&nbsp;&nbsp; = foldr ($) y</p>

<p>The XSLT implementation is once again very simple:</p>

<p>compose-flist.xsl</p>

<table border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#E1F4F4">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #E1F4F4;"><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">version</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; 
</span><span style="color: #FF0000; background-color: #E1F4F4;">xmlns:xsl</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #FF0000; background-color: #E1F4F4; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
</span><span style="color: #FF0000; background-color: #E1F4F4;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #FF0000; background-color: #E1F4F4; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">compose-flist</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pFunList</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">test</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">not($pFunList)</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">        &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="background-color: #E1F4F4;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">vrtfFunRest</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="background-color: #E1F4F4;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">compose-flist</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">            &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pFunList</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
                            </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$pFunList[position() &gt; 1]</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="background-color: #E1F4F4;">&nbsp;&nbsp;&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="background-color: #E1F4F4;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="background-color: #E1F4F4;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="background-color: #E1F4F4;">&nbsp;&nbsp;&nbsp;&nbsp;    
&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$pFunList[1]</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="background-color: #E1F4F4;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
                       </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">msxsl:node-set($vrtfFunRest)/node()</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="background-color: #E1F4F4;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;

</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
&lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span></pre>
</table>

<p>Let's now see an example how <font class="c">compose</font> and <font class="c">compose-flist</font> are used
in practice.</p>

<p>testCompose.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#E1F4F4">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #E1F4F4;"><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">version</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; 
</span><span style="color: #FF0000; background-color: #E1F4F4;">xmlns:xsl</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #FF0000; background-color: #E1F4F4; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
</span><span style="color: #FF0000; background-color: #E1F4F4;">xmlns:myFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #FF0000; background-color: #E1F4F4; font-weight: bold;">f:myFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
</span><span style="color: #FF0000; background-color: #E1F4F4;">xmlns:myFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #FF0000; background-color: #E1F4F4; font-weight: bold;">f:myFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; 
</span><span style="color: #FF0000; background-color: #E1F4F4;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #FF0000; background-color: #E1F4F4; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
</span><span style="color: #800080; background-color: #E1F4F4;">exclude-result-prefixes</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">xsl myFun1 myFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">href</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">compose.xsl</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">href</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">compose-flist.xsl</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> to be applied on any xml source </span><span style="color: #0000FF; background-color: #E1F4F4;">--&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">method</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800000; background-color: #E1F4F4;">myFun1:myFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800000; background-color: #E1F4F4;">myFun2:myFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">/&gt;


</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">match</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">vFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">document('')/*/myFun1:*[1]</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">vFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">document('')/*/myFun2:*[1]</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="background-color: #E1F4F4; font-weight: bold;">    Compose:
    (*3).(*2) 3 = </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:text</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #0000FF; background-color: #E1F4F4;">/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">compose</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$vFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$vFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">3</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">vrtfParam</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$vFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$vFun2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">$vFun1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    
</span><span style="background-color: #E1F4F4; font-weight: bold;">    Multi Compose:
    (*3).(*2).(*3) 2 = </span><span style="color: #0000FF; background-color: #E1F4F4;">&lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:text</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #0000FF; background-color: #E1F4F4;">/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">compose-flist</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pFunList</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;
                      </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">msxsl:node-set($vrtfParam)/*</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">      &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot; </span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">2</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">match</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">myFun1:*</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">3 * $pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;

</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">match</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">myFun2:*</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">name</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">    
</span><span style="color: #0000FF; background-color: #E1F4F4;">    &lt;</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"> </span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;"></span><span style="color: #800080; background-color: #E1F4F4;">select</span><span style="color: #0000FF; background-color: #E1F4F4;">=&quot;</span><span style="color: #000000; background-color: #E1F4F4; font-weight: bold;">2 * $pArg1</span><span style="color: #0000FF; background-color: #E1F4F4;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #E1F4F4;">  &lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
&lt;/</span><span style="color: #800080; background-color: #E1F4F4; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #E1F4F4;">&gt;
</span></pre>
</table>

<p>This transformation calculates:<br />
<br />
</p>

<p class="c2">(*3).(*2) 3<br />
<br />
</p>

<p>and<br />
<br />
</p>

<p class="c2">(*3).(*2).(*3) 2</p>

<p class="c2">&nbsp;</p>

<p>The result is:</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#FFFF80">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #FFFF80;"><span style="background-color: #FFFF80; font-weight: bold;">    Compose:
    (*3).(*2) 3 = 18

    Multi Compose:
    (*3).(*2).(*3) 2 = 36

</span></pre>
</table>

<p>To show the big importance of having a convenient way to perform
(multiple) composition, here are two more examples.</p>

<p>Imagine that we have to perform a series of map-operations on a
list of values. We could define a <font class="c">multiMap</font> function in the
following way:</p>

<p class="c2">multiMapR xs fs&nbsp; = foldr map xs fs</p>

<p>or (, which is the same) just:</p>

<p class="c2">multiMapR&nbsp;&nbsp; =&nbsp; foldr map</p>

<p><font class="c">multiMapR</font> will map successively all functions in the list <font class="c">fs</font> (in
a right-to-left order) starting on the list <font class="c">xs</font>, then on the result
of the map with the right-most function from <font class="c">fs</font>,... etc.</p>

<p>For example,</p>

<p class="c2">multiMapR [1, 2, 3] [(+1), (*2)]</p>

<p>evaluates to:</p>

<p class="c2">[3,5,7] (<font class="t">This is</font> map (+1) (map (*2) [1,2,3]) = map
(+1) [2,4,6])</p>

<p>Or, if we find more convenient to map the functions from left to
right, we can define:</p>

<p class="c2">multiMapL = foldl (flip map)</p>

<p>Then the expression:</p>

<p class="c2">multiMapL [1, 2, 3] [(+1), (*2)]</p>

<p>evaluates to:</p>

<p class="c2">[4,6,8] (<font class="t">This is</font> map (*2) (map (+1) [1,2,3]) = map (*2)
[2,3,4])</p>

<p>There's only one quite unpleasant issue with the <font class="c">multiMapX</font>
(where X is 'L' or 'R') functions as defined above: successive
mapping will use a lot of memory (<font class="c">N</font> times the memory for the list
<font class="c">xs</font>,&nbsp; where <font class="c">N = length(fs)</font>) as every 
<font class="c">map</font> operation 
produces a new list, which some not quite intelligent processor/garbage
collector may not reclaim in time.</p>

<p>The solution to this problem comes easily if we notice that the
following equation holds always true:</p>

<p class="c2">multiMapR xs fs&nbsp; = map (multiCompose fs)
xs&nbsp;&nbsp; (3)</p>

<p>So, only one map operation is performed in (3). Indeed, this is
what HUGS <a href="#Res-5">[5]</a> will produce:</p>

<table class="code" border="0" cellspacing="0"
cellpadding="0" bgcolor="black" width="100%">
<tr>
<td valign="top">
<pre style="font-family: Courier New; font-size: 8pt; color: white; background-color: black;"><font class="c" color="white">MyExamples&gt; map (multiCompose [(+1), (*2)]) [1,2,3]</pre>
<pre style="font-family: Courier New; font-size: 8pt; color: white; background-color: black;"><b><i>[3,5,7]</i></b></pre>
</td>
</tr>
</table>

<p>Note also, that in the above definition the first argument
passed to the <font class="c">map</font> function is a partial application of
<font class="c">multiCompose</font>. The proof of <font class="c">(3)</font> and the XSLT implementation of 
an efficient <font class="c">multiMapX</font> function are left as exercise to the reader. An
obvious question will arise attempting to do so -- "how to implement
a partial application in XSLT?" The answer to this question is
provided in the next section.</p>

<p>The last example is strongly based on requirements that
originated from routine, practical XSLT programming.</p>

<p>We need to implement a <font class="c">trim</font> function, which accepts a string and
produces its content stripped off any leading or trailing
white-space characters.</p>

<p>A definition of <font class="c">trim</font> in Haskell might look like this:</p>

<p class="c2">trim&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;:: [Char] -&gt;
[Char]</p>

<p class="c2">trim&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = applyTwice
(reverse . trim1)</p>

<p class="c2">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
where&nbsp; trim1 = dropWhile (`elem` delim)</p>

<p class="c2">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
delim&nbsp;&nbsp;&nbsp; = [' ', '\t', '\n', '\r']</p>

<p class="c2">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
applyTwice f = f . f</p>

<p>What this says is that we are actually doing the following:</p>

<ul type="disc">
<li><font class="c">trim1</font> (trim the start of) the string.</li>

<li><font class="c">reverse</font> the left-trimmed string.</li>

<li><font class="c">trim1</font> the reversed string (this will trim the left end of the
reversed string, which is actually the right end of the original
string).</li>

<li><font class="c">reverse</font> finally the string (it has already been trimmed from
both ends).</li>
</ul>

<p>Note that here we're using both functional composition and
partial application almost in all possible places in the above
definition.</p>

<p>A simpler solution is to use just <font class="c">multiCompose</font>:</p>

<p class="c2">trim&nbsp; =&nbsp; multiCompose [reverse, trim1,
reverse, trim1]</p>

<p>Here's the XSLT implementation of the above definition of
<font class="c">trim</font>:</p>

<p>trim.xsl</p>

<table  border="0" cellspacing="0" cellpadding="0" bgcolor="#D3ECEF" width="100%">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
</span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
</span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
</span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:myTrimDropController</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:myTrimDropController</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
</span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:myTrim1</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:myTrim1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
</span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:myReverse</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:myReverse</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
</span><span style="color: #800080; background-color: #D3ECEF;">exclude-result-prefixes</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">xsl myTrimDropController myTrim1 myReverse</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">str-dropWhile.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">compose-flist.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">reverse.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800000; background-color: #D3ECEF;">myTrimDropController:myTrimDropController</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">trim</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pStr</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfParam</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">myReverse:myReverse</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">myTrim1:myTrim1</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">myReverse:myReverse</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">myTrim1:myTrim1</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">compose-flist</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pFunList</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                        </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfParam)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pStr</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">trim1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">myTrim1:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vTab</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold; font-style: italic;">&amp;#9;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vNL</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold; font-style: italic;">&amp;#10;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vCR</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold; font-style: italic;">&amp;#13;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vWhitespace</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
                </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">concat(' ', $vTab, $vNL, $vCR)</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vFunController</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">document('')/*/myTrimDropController:*[1]</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">str-dropWhile</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pStr</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pController</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vFunController</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pContollerParam</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vWhitespace</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">myTrimDropController:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pChar</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pParams</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">contains($pParams, $pChar)</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">myReverse</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">myReverse:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">strReverse</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pStr</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

</span></pre>
</table>

<p>A number of other functions are used in the code: <font class="c">str-dropWhile</font>,
<font class="c">strReverse</font> and <font class="c">str-foldl</font>. 
These are part of the <a href="#Res-3">FXSL library</a> as
currently available on TopXML.com. It is a general convention in
FXSL that a function named strSomeName is an implementation of the
function someName for strings. This is necessary in an XSLT
implementation, because strings in Xpath/XSLT cannot be naturally
treated as lists of characters.</p>

<p>Here's a simple test of the XSLT <font class="c">trim</font> function:</p>

<p>testTrim.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" bgcolor="#D3ECEF" width="100%">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
</span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">trim.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> to be applied on trim.xml </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">method</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">    '</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">trim</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pStr</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">string(/*)</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span></pre>
</table>

<p>Let's apply the above transformation on the following simple xml
document:</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#FFC286">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #FFC286;"><span style="color: #0000FF; background-color: #FFC286;">&lt;</span><span style="color: #800000; background-color: #FFC286;">someText</span><span style="color: #0000FF; background-color: #FFC286;">&gt;
</span><span style="color: #0000FF; background-color: #FFC286;">   
</span><span style="background-color: #FFC286; font-weight: bold;">   This is    some text   
   
</span><span style="color: #0000FF; background-color: #FFC286;">&lt;/</span><span style="color: #800000; background-color: #FFC286;">someText</span><span style="color: #0000FF; background-color: #FFC286;">&gt;
</span></pre>
</table>

<p>The result is:</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#FFFF93">
<tr>
<td width="576" valign="top">
<br/>
<pre style="font-family: Courier New; font-size: 8pt; background-color: #FFFF93;"><p class="c5">&nbsp;&nbsp;&nbsp; 'This is&nbsp;&nbsp;&nbsp; some text'</p></pre>
</td>
</tr>
</table>

<h2><a name="3._Implementation_of_currying_and_partial_application_in_XSLT.">3. Implementation of currying and partial application in
XSLT.</a></h2>

<p>The examples in the previous section demonstrated the importance
of being able to use partial applications of functions. Here we
provide an XSLT implementation of currying and partial application.
Let's recall the definition of <font class="c">curry</font>:</p>

<p class="c2">curry&nbsp; f x y&nbsp; =&nbsp; f(x,y)</p>

<p>This means that <font class="c">curry f&nbsp;</font> returns a (curried) function of two
arguments, and</p>

<p><font class="c">curry f x&nbsp;</font> returns a function of one argument.</p>

<p>An XSLT implementation of <font class="c">curry</font> should therefore do the
following:</p>

<ol start="1" type="1">
<li>Keep a reference to the function <font class="c">f</font>. This will be needed if all
arguments are passed and the value of <font class="c">f</font> (as opposed to a partial
application function) must be calculated.</li>

<li>Keep a record of the number of arguments of <font class="c">f</font>. This is
necessary, as we are departing from the above definition (taken
from Haskell's Prelude) and will try to define and implement in
XSLT a more generic currying function, that can process functions
having up to ten arguments.</li>

<li>Provide a reference to an internal generic <font class="c">partial-applicator</font>
function, that will record and accumulate the name-value pairs of
the passed arguments and, in case all arguments have been provided,
will apply <font class="c">f</font> on them and return the result. In case not all
arguments' values have yet been provided, the <font class="c">partial-applicator</font>
will return a variant of itself, that knows about all the
arguments' values accumulated so far. Here's another difference
between our definition and XSLT implementation of partial
application and its Haskell counterpart: because XSLT template
parameters are known by name, they can be passed in any order -
this means that in XSLT we can implement partial application not
only when the first argument(s) are provided, but in any case in
which any subset of arguments' values have been specified. For
example, given the function:
<p><font class="c">f x y z</font>, 
<br/><br/>in Haskell one can have the following partial
applications:<br />
<font class="c">f x</font> and <font class="c">f x y</font>. 
<br/><br/>Our implementation will allow us to obtain:<br/> 
<font class="c">f x</font>, <font class="c">f
y</font>, <font class="c">f z</font>,<br />
<font class="c">f x y</font>, <font class="c">f x z</font>, <font class="c">f y z</font>.</p>

</li>
</ol>


<p>But, in case we're accepting named arguments, how do we know the
names of the arguments of an arbitrary function to be curried and
partially applied? The answer is that while arguments have names,
only the names of type "arg"<b>&lt;N&gt;</b> are allowed - that is "arg1",
"arg2", ..., "arg10". This is a reasonable limitation resulting in a
much more powerful partial application through the combination of
naming and implicit ordering, indicated by the numeric part of the
names of the arguments.</p>

<p>Bellow is our XSLT implementation of <font class="c">curry</font> and partial
application:</p>

<p>curry.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" bgcolor="#D3ECEF" width="100%">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:curryPartialApplicator</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:curryPartialApplicator</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #800080; background-color: #D3ECEF;">exclude-result-prefixes</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl curryPartialApplicator</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 &gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curry</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pNargs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">args</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pNargs </span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;"> 2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">terminate</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">         [curry]Error: pNargs (number of arguments) of a fn to be 
                       curried must be at least 2
      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pNargs &gt; 10</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">terminate</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">         [curry]Error: pNargs (number of arguments) of a fn to be 
                       curried must not exceed 10
      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Build the Resulting fn with an empty Arguments store </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfCurriedNoArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">curryPartialApplicator:curryPartialApplicator</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">fun</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">fun</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">curryNumargs</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pNargs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">curryNumargs</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">curryPartialApplicator:curryPartialApplicator</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vCurriedNoArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfCurriedNoArgs)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">not($args)
                    and 
                      not($arg1 or $arg2 or $arg3 or $arg4 or $arg5   
                       or $arg6 or $arg7 or $arg8 or $arg9 or $arg10   
                          )</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vCurriedNoArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vCurriedNoArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">args</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$args</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curryPartialApplicator:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">args</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">not($args)
                  and 
                    not($arg1 or $arg2 or $arg3 or $arg4 or $arg5   
                     or $arg6 or $arg7 or $arg8 or $arg9 or $arg10   
                        )</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">terminate</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">         [currying]Error: No arguments specified!      
      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtvArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$args</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtvArgs)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">count($vArgs) &gt; curryNumargs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">concat('[currying]Error: The number of
actual arguments supplied is ',
                                      count($vArgs), ' -- bigger than
the number of arguments of this function:',
                                      curryNumargs
                                     )</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vArgs = curryArgs/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">          [currying]Error: Same argument(s) fixed twice
      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:for-each</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vArgs[not(position()=last())]</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vThisPosition</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">position()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">. = $vArgs[position() &gt; $vThisPosition
                             and
                               name() = name(current())
                               ]</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">           [currying]Error: Same argument(s) specified twice
        </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:for-each</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Normal  Processing </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfNewFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">curryPartialApplicator:curryPartialApplicator</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">fun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curryNumargs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800000; background-color: #D3ECEF;">curryArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curryArgs/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">curryArgs</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">curryPartialApplicator:curryPartialApplicator</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vNewFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfNewFun)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curryNumargs &gt; count($vNewFun/curryArgs/*)</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">fun/*[1]</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg1/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg2/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg3/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg4</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg4/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg5/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg6</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg6/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg7</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg7/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg8</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg8/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg9</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg9/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg10</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                          </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vNewFun/curryArgs/arg10/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span></pre>
</table>

<p>The above code might seem overwhelming in size, however it is
very easy to understand. If we ignore the error
detection/processing and the treatment of up-to 10 arguments, then
the code that does the useful work is just a few lines.</p>

<p>The <font class="c">curry</font> function is very simple. It takes a function (a
template reference) and a second argument, which is the number of
the arguments of this function.</p>

<p>It produces a partial application of the function with no
arguments' values specified.</p>

<p>Then, it checks if values of arguments were specified, and if
yes, it applies the internal <font class="c">partialApplicator</font> function to produce
the result as a partial application.</p>

<p>The internal <font class="c">partialApplicator</font> function accepts up to ten
arguments, whose names follow the convention "<font class="c">arg</font>"<b>&lt;N&gt;</b>, and a
special argument named "<font class="c">args</font>", whose purpose will be explained
later. All arguments have the empty node-set as default value and
any of them may not be specified on an actual instantiation of the
function.</p>

<p>The code finds any specified argument using the simple rule,
that if the N-th argument is not specified, then
"<font class="c">arg</font>"<b>&lt;N&gt;</b> should be false (either the empty node-set or the
empty string). All specified arguments are appended to an internal
structure, containing elements with names "<font class="c">arg</font>"<b>&lt;N&gt;</b> and values
- the value specified for the "<font class="c">arg</font>"<b>&lt;N&gt;</b> argument. 
For example,
if <font class="c">f</font> has 6 arguments and 3 of them were specified, the
<font class="c">partialApplicator</font>'s internal store could look like this:</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#C8F3B8">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #C8F3B8;"><span style="color: #0000FF; background-color: #C8F3B8;">&lt;</span><span style="color: #800000; background-color: #C8F3B8;">curryPartialApplicator:curryPartialApplicator</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;
</span><span style="color: #0000FF; background-color: #C8F3B8;">  &lt;</span><span style="color: #800000; background-color: #C8F3B8;">fun</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;&lt;</span><span style="color: #800000; background-color: #C8F3B8;">someFunNode </span><span style="color: #0000FF; background-color: #C8F3B8;">/&gt;&lt;/</span><span style="color: #800000; background-color: #C8F3B8;">fun</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;
</span><span style="color: #0000FF; background-color: #C8F3B8;">  &lt;</span><span style="color: #800000; background-color: #C8F3B8;">curryNumargs</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;</span><span style="background-color: #C8F3B8; font-weight: bold;">6</span><span style="color: #0000FF; background-color: #C8F3B8;">&lt;/</span><span style="color: #800000; background-color: #C8F3B8;">curryNumargs</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;
</span><span style="color: #0000FF; background-color: #C8F3B8;">  &lt;</span><span style="color: #800000; background-color: #C8F3B8;">curryArgs</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;
</span><span style="color: #0000FF; background-color: #C8F3B8;">    &lt;</span><span style="color: #800000; background-color: #C8F3B8;">arg1</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;</span><span style="background-color: #C8F3B8; font-weight: bold;">a</span><span style="color: #0000FF; background-color: #C8F3B8;">&lt;/</span><span style="color: #800000; background-color: #C8F3B8;">arg1</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;
</span><span style="color: #0000FF; background-color: #C8F3B8;">    &lt;</span><span style="color: #800000; background-color: #C8F3B8;">arg3</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;</span><span style="background-color: #C8F3B8; font-weight: bold;">b</span><span style="color: #0000FF; background-color: #C8F3B8;">&lt;/</span><span style="color: #800000; background-color: #C8F3B8;">arg3</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;
</span><span style="color: #0000FF; background-color: #C8F3B8;">    &lt;</span><span style="color: #800000; background-color: #C8F3B8;">arg5</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;</span><span style="background-color: #C8F3B8; font-weight: bold;">c</span><span style="color: #0000FF; background-color: #C8F3B8;">&lt;/</span><span style="color: #800000; background-color: #C8F3B8;">arg5</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;
</span><span style="color: #0000FF; background-color: #C8F3B8;">  &lt;/</span><span style="color: #800000; background-color: #C8F3B8;">curryArgs</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;
&lt;/</span><span style="color: #800000; background-color: #C8F3B8;">curryPartialApplicator:curryPartialApplicator</span><span style="color: #0000FF; background-color: #C8F3B8;">&gt;

</span></pre>
</table>

<p>
Notice that exactly the above structure is returned as the result
of applying <font class="c">f</font> with three arguments 
(<font class="c">arg1 = "a", arg3 = "b", arg5 = "c"</font>) -- in fact 
this is a new template reference to the
implementation of <font class="c">partialApplicator</font>, which has recorded all the
(partial) arguments' values provided so far.</p>

<p>Whenever values for all arguments will be provided, the code
above instantiates the template that implements the <font class="c">f</font> function -
the template reference to it is stored in the <!-- Highlighted HTML from Xselerator -->
<code style="font-family: Courier New; font-size: 8pt; color: #000000; ><span style="color: #0000FF; background-color: #FFFFFF;">&lt;</span><span style="color: #800000; background-color: #FFFFFF;">fun</span><span style="color: #0000FF; background-color: #FFFFFF;">&gt;
</span></code> element.</p>

<p>One last question remains - what if we need to pass as some
argument's value the empty string (node-set)? This is the only
situation, which requires that the "<font class="c">args</font>" argument of
<font class="c">partialApplicator</font> or <font class="c">curry</font> be used. As an example, let's assume that we need
to pass null string values for <font class="c">arg2</font> and <font class="c">arg4</font>. 
Then the value of the <font class="c">args</font> argument must be the following node-set:</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#C8F3B8">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #C8F3B8;"><span style="background-color: #C8F3B8;">&nbsp;&nbsp;</span><span style="color: #0000FF; background-color: #C8F3B8;">&lt;</span><span style="color: #800000; background-color: #C8F3B8;">arg2</span><span style="color: #0000FF; background-color: #C8F3B8;">/&gt;
</span><span style="background-color: #C8F3B8;">&nbsp;&nbsp;</span><span style="color: #0000FF; background-color: #C8F3B8;">&lt;</span><span style="color: #800000; background-color: #C8F3B8;">arg4</span><span style="color: #0000FF; background-color: #C8F3B8;">/&gt;

</span></pre></table>

<p>Note that this situation will only happen rarely, so it is
generally very convenient to create a partial application providing
the arguments in the traditional XSLT way.</p>

<p>Let's test currying and partial application of a curried
function with a simple example. We'll curry the <font class="c">multiply</font> function,
defined as:</p>

<p class="c2">multiply (x,y) = x*y</p>

<p>and then obtain its partial application for <font class="c">x=5</font>&nbsp; ( the
function <font class="c">(5*)</font>). Finally, we'll apply the so obtained <font class="c">(5*)</font> on the
argument with a value <font class="c">2</font> - that is, we'll calculate:</p>

<p class="c2">(5*) 2</p>

<p>and the answer should be as expected, <font class="c">10</font>.</p>

<p>testCurry.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#D3ECEF">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:myMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:myMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #800080; background-color: #D3ECEF;">exclude-result-prefixes</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl myMultiply </span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 &gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;"> &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curry.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">omit-xml-declaration</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">indent</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800000; background-color: #D3ECEF;">myMultiply:myMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;">     &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> My multiply x y function </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vMyMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">document('')/*/myMultiply:*[1]</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Get the curried fn here </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Get the partial application (*5) </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfCurriedMultBy5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curry</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vMyMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pNargs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vMultBy5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfCurriedMultBy5)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;


</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vMultBy5</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;"> &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Apply (*5) on 2 </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;"> &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> The result must be 10 </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">myMultiply:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg1 * $arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span></pre>
</table>

<p>The <font class="c">uncurry</font> function (I doubt someone will really need it) is
very straightforward. It just returns (<font class="c">xsl:copy-of</font>) the "<font class="c">fun</font>" child
of the curried function.</p>

<h2><a name="4._Using_currying_and_partial_application_-_the_iter_and_power_functions.">4. Using currying and partial application - the <font class="c">iter</font> 
and <font class="c">power</font>
functions.</a></h2>

<p>In this section we solve a practical problem by passing a
specific function to a much more generic one.</p>

<p>First, let's define the function <font class="c">iter</font>:</p>

<p class="c2"><br />
iter n f&nbsp;<br />
 &nbsp;&nbsp;&nbsp;&nbsp; | n &gt; 0&nbsp;&nbsp;&nbsp;&nbsp; = f .
iter (n-1) f</p>

<p class="c2">&nbsp;&nbsp;&nbsp;&nbsp; | n == 0&nbsp;&nbsp;&nbsp; =
id</p>

<p class="c2">&nbsp;&nbsp;&nbsp;&nbsp; | otherwise = error "[iter]:
Negative argument!"</p>

<p>As defined, <font class="c">iter</font> takes a non-negative number <font class="c">n</font> 
and a function <font class="c">f</font>
and returns another function, which is the composition of <font class="c">f</font> with
itself <font class="c">n-1</font> times.</p>

<p>We want to use <font class="c">iter</font> in order to define a function 
<font class="c">pow</font>, which
takes a non-negative argument <font class="c">n</font> and a real argument <font class="c">x</font> 
and produces
<font class="c">x</font> to the power of <font class="c">n</font> 
(<font class="c">x^n</font>):</p>

<p class="c2">power n x = iter n (multByX x) 1</p>

<p class="c2">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
where</p>

<p class="c2">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
multByX x y = (*x) y</p>

<p>Note the use of the partial application in <font class="c">multByX</font>. There are
cases when we might know in advance that we need a particular
partial application (e.g. <font class="c">(+1), (*3)</font>, etc.) and in any such case we
might implement a specific function for that. However, <font class="c">multByX</font> is
defined completely dynamically, depending on the value of <font class="c">x</font>. To
implement <font class="c">power</font> as defined above, we must create the <font class="c">multByX</font>
function dynamically at run time, whenever <font class="c">power</font> is invoked.</p>

<p>Bellow is the xslt code for <font class="c">iter</font>.</p>

<p>iter.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#D3ECEF">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #800080; background-color: #D3ECEF;">exclude-result-prefixes</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">xsl msxsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> this implements functional power composition,
       that is f(f(...f(x)))))...) 
       
    f composed with itself n - 1 times </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">iter</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; /&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pTimes = 0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; &gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pTimes = 1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pTimes &gt; 1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vHalfTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                      </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">floor($pTimes div 2)</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vHalfIters</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">iter</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">            &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vHalfTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">iter</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">            &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                            </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pTimes - $vHalfTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                            </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vHalfIters)</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">[iter]Error: the $pTimes argument must be
                      a positive integer or 0.
        </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span></pre>
</table>

<p>There's nothing special in the above code except that it
implements a DVC (divide and conquer) algorithm in order to avoid
crashing of non-smart XSLT processors due to stack overflow in deep
recursive processing.</p>

<p>The code for <font class="c">power</font> is more interesting:</p>

<p>pow.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#D3ECEF">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:myMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:myMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
 </span><span style="color: #800080; background-color: #D3ECEF;">exclude-result-prefixes</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">xsl msxsl myMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 &gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curry.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">iter.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800000; background-color: #D3ECEF;">myMultiply:myMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> This template implements the following general power fn:
  
&nbsp;&nbsp;&nbsp;&nbsp;&gt; power :: (Ord a, Num a, Num b) =&gt; a -&gt; b -&gt; b
&nbsp;&nbsp;&nbsp;&nbsp;&gt; power n x = iter n (multByX x) 1
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;where
&nbsp;&nbsp;&nbsp;&nbsp;&gt; multByX :: Num a =&gt; a -&gt; a -&gt; a
&nbsp;&nbsp;&nbsp;&nbsp;&gt; multByX x y = (*x) y
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Note the use of the partial application in multByX !
    
    </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pow</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">document('')/*/myMultiply:*[1]</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfCurriedMultByX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">curry</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vMultiply</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pNargs</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vCurriedMultByX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; 
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfCurriedMultByX)/node()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">iter</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vCurriedMultByX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">myMultiply:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$arg1 * $arg2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span></pre>
</table>

<p>As can be seen, we curry the <font class="c">myMultiply</font> function and at the same
time dynamically create its partial application, binding the second
argument to the value of <font class="c">pX</font>. Then we pass this dynamically created
partial application as argument to <font class="c">iter</font>.</p>

<p>And here's how <font class="c">pow</font> works:</p>

<p>testPow.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#D3ECEF">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; &gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pow.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;"> 

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">method</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:for-each</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">(document('')//node())[position() </span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;"> 10]</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">concat(position(), '^', position(),' = ')</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pow</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">position()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">position()</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:text</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;"></span><span style="color: #000000; background-color: #D3ECEF; font-style: italic;">&amp;#xA;</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:text</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:for-each</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:text</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">(1 + 1/10000)^10000 = </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:text</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pow</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pTimes</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">5000</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0002</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="background-color: #D3ECEF;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span></pre>
</table>

<p>Applying the above transformation produces the following result
in just 2 sec. (MSXML4 on a W2K 800MHz 128MB RAM Pentium):</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#FFFF80">
<tr>
<td width="576" valign="top">
<pre style="font-family: Courier New; font-size: 8pt; background-color: #FFFF80;"><p class="c4">1^1 = 1</p>
<p class="c4">2^2 = 4</p>
<p class="c4">3^3 = 27</p>
<p class="c4">4^4 = 256</p>
<p class="c4">5^5 = 3125</p>
<p class="c4">6^6 = 46656</p>
<p class="c4">7^7 = 823543</p>
<p class="c4">8^8 = 16777216</p>
<p class="c4">9^9 = 387420489</p>
<p class="c4">(1 + 1/10000)^10000 = 2.7181459268248984</p></pre>
</td>
</tr>
</table>

<h2><a name="5._Creating_a_new_function_dynamically_-_the_calculator_store_problem.">5. Creating a new function dynamically - the calculator store
problem.</a></h2>

<p>Here's an example, taken right from the book of Simon Thompson
"<i>Haskell: The Craft of Functional Programming</i>" <a href="#Res-6">[6]</a>.</p>

<p>Suppose we are to build a calculator for numerical expressions.
As part of our system we need to be able to model the current
values of the user-defined variables, which we might call <i>the
store</i> of the calculator.</p>

<p>To model the store, we define an abstract data type (ADT), which
has the following signature:</p>

<p class="c2">initial :: Store</p>

<p class="c2">value&nbsp;&nbsp; :: Store -&gt; Var -&gt; Int</p>

<p class="c2">update&nbsp; :: Store -&gt; Var -&gt; Int -&gt; Store</p>

<p>The function "<font class="c">initial</font>" produces an initial (empty) store.</p>

<p>The function "<font class="c">value</font>" retrieves from the store the value (Int)
of a variable name.</p>

<p>The function "<font class="c">update</font>" updates the store with a new
(variable-name, value) association.</p>

<p>This ADT can have different implementations, e.g. by keeping an
internal list of pairs (varName, value), or by implementing a
function that given a variable name returns its value.</p>

<p>The latter implementation is defined in Haskell in the following
way:</p>

<p class="c2">newtype Store = Sto (Var -&gt; Int)</p>

<p class="c2">initial :: Store</p>

<p class="c2">initial =&nbsp; Sto (\v -&gt; 0)</p>

<p class="c2">value&nbsp;&nbsp; :: Store -&gt; Var -&gt; Int</p>

<p class="c2">value (Sto sto) v = sto v</p>

<p class="c2">update&nbsp; :: Store -&gt; Var -&gt; Int -&gt; Store</p>

<p class="c2">update (Sto sto) v n</p>

<p class="c2">&nbsp;&nbsp;= Sto (\w -&gt; if v == w then n else sto w)</p>

<p>Under this implementation:</p>

<ul>
<li>The initial <font class="c">store</font> maps every variable to 0.</li>

<li>To look up a value of a variable <font class="c">v</font> the store function <font class="c">sto</font> is
applied to v.</li>

<li>In the case of an update, the new <font class="c">store</font> returned has a
function, which is identical to <font class="c">sto</font> of the updated object, except
on the variable, whose value is changed.</li>
</ul>

<p>Here's the corresponding XSLT implementation:</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#D3ECEF">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:getInitialStore</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:getInitialStore</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:getValue</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:getValue0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:upd-getValue</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:upd-getValue</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:updateStore</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">f:updateStore</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">getInitialStore</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">getInitialStore:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800000; background-color: #D3ECEF;">store</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">getInitialStore:getInitialStore</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">getValue:getValue</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">updateStore:updateStore</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800000; background-color: #D3ECEF;">store</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">getValue:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">     &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">updateStore:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pValue</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800000; background-color: #D3ECEF;">store</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">getInitialStore:getInitialStore</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">upd-getValue:getValue</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800000; background-color: #D3ECEF;">store</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">../*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">store</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800000; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800000; background-color: #D3ECEF;">value</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pValue</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D3ECEF;">value</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800000; background-color: #D3ECEF;">upd-getValue:getValue</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800000; background-color: #D3ECEF;">updateStore:updateStore</span><span style="color: #0000FF; background-color: #D3ECEF;">/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800000; background-color: #D3ECEF;">store</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">upd-getValue:*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">test</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pName = name</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">value</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">store/*[local-name()='getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span></pre>
</table>

<p>What is important to note in this example is that on every call
of the <font class="c">updateStore</font> function, it creates a new store containing a
template reference for a new <font class="c">getValue</font> function, like this:</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#c8f3b8 ">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #c8f3b8;"><span style="color: #0000FF; background-color: #c8f3b8;">&lt;</span><span style="color: #800000; background-color: #c8f3b8;">store</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;
</span><span style="color: #0000FF; background-color: #c8f3b8;">  &lt;</span><span style="color: #800000; background-color: #c8f3b8;">getInitialStore:getInitialStore</span><span style="color: #0000FF; background-color: #c8f3b8;">/&gt;
</span><span style="color: #0000FF; background-color: #c8f3b8;">  &lt;</span><span style="color: #800000; background-color: #c8f3b8;">upd-getValue:getValue</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;
</span><span style="color: #0000FF; background-color: #c8f3b8;">    &lt;</span><span style="color: #800000; background-color: #c8f3b8;">store</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;&lt;</span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;"> </span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;"></span><span style="color: #800080; background-color: #c8f3b8;">select</span><span style="color: #0000FF; background-color: #c8f3b8;">=&quot;</span><span style="color: #000000; background-color: #c8f3b8; font-weight: bold;">../*</span><span style="color: #0000FF; background-color: #c8f3b8;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #c8f3b8;">store</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;
</span><span style="color: #0000FF; background-color: #c8f3b8;">    &lt;</span><span style="color: #800000; background-color: #c8f3b8;">name</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;&lt;</span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;"> </span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;"></span><span style="color: #800080; background-color: #c8f3b8;">select</span><span style="color: #0000FF; background-color: #c8f3b8;">=&quot;</span><span style="color: #000000; background-color: #c8f3b8; font-weight: bold;">$pName</span><span style="color: #0000FF; background-color: #c8f3b8;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #c8f3b8;">name</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;
</span><span style="color: #0000FF; background-color: #c8f3b8;">    &lt;</span><span style="color: #800000; background-color: #c8f3b8;">value</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;&lt;</span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;"> </span><span style="color: #800080; background-color: #c8f3b8; font-weight: bold;"></span><span style="color: #800080; background-color: #c8f3b8;">select</span><span style="color: #0000FF; background-color: #c8f3b8;">=&quot;</span><span style="color: #000000; background-color: #c8f3b8; font-weight: bold;">$pValue</span><span style="color: #0000FF; background-color: #c8f3b8;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #c8f3b8;">value</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;
</span><span style="color: #0000FF; background-color: #c8f3b8;">  &lt;/</span><span style="color: #800000; background-color: #c8f3b8;">upd-getValue:getValue</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;
</span><span style="color: #0000FF; background-color: #c8f3b8;">  &lt;</span><span style="color: #800000; background-color: #c8f3b8;">updateStore:updateStore</span><span style="color: #0000FF; background-color: #c8f3b8;">/&gt;
&lt;/</span><span style="color: #800000; background-color: #c8f3b8;">store</span><span style="color: #0000FF; background-color: #c8f3b8;">&gt;

</span></pre>
</table>

<p>This template reference always initiates the same template rule,
<b>but for a different function</b>. As we see, a function is not
identical to the template rule that implements it, it is a tree, in
which useful data can be stored, that fully defines the
function.</p>

<p>This function may call a chain of previously defined <font class="c">getValue</font>
functions for the previous stores, until the first occurrence of a
variable name is found, or if not, then finally the initial
<font class="c">getValue</font> function instantiates another template rule to return the
value 0.</p>

<p>This example has big importance in that it shows how we can
implement objects in XSLT. Under this interpretation <font class="c">store</font> is an
object with getInitialStore as constructor. It also has two methods
- <font class="c">getValue</font>, which performs a lookup for a variable's value given
its name, and <font class="c">updateStore</font>, which creates a new <font class="c">store</font> object. We
have also showed how to model <i>inheritance</i> and <i>virtual
functions</i>. Indeed, every newly created <font class="c">store</font> object can be
regarded as derived from the base <font class="c">store</font> object and with a new
<font class="c">getValue</font> virtual function. The <font class="c">getValue</font>
 function has two different
implementations - one for the <font class="c">getValue</font> function of an initially
constructed <font class="c">store</font> object (this function returns 0 regardless of any
given variable name), and another, which performs the lookup. As
can be seen in the test of our <font class="c">store</font> implementation bellow, we can
invoke any of these functions using the same linguistic construct -
which function will be invoked depends on the <font class="c">store</font> object, against
the context of which the call is performed. Different
implementations of a virtual function all have template references
with the same <font class="c">local-name()</font>, but belonging to different
namespaces.</p>

<p>And here's the test of our implementation of <font class="c">store</font>.</p>

<p>testStore.xsl</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#D3ECEF">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #D3ECEF;"><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">version</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
 </span><span style="color: #FF0000; background-color: #D3ECEF;">xmlns:msxsl</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #FF0000; background-color: #D3ECEF; font-weight: bold;">urn:schemas-microsoft-com:xslt</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">href</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">store.xsl</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> to be applied on any xml source </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">  
</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">method</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;">  

</span><span style="color: #0000FF; background-color: #D3ECEF;">  &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">match</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D3ECEF;"> 
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Get Initial Store </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfStore0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">getInitialStore</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vStore0</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfStore0)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Get A, B, C from the initial store: must be 0-s </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">      vStore0:
      A='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore0/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'A'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
      B='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore0/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'B'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
      C='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore0/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'C'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'

    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Update store0 with 'A=1' </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfStore1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                  </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore0/*[local-name() = 'updateStore']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'A'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pValue</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vStore1</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfStore1)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Get A, B, C from the store1: A is 1, the rest must be 0-s </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">      vStore1:
      A='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore1/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">          &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'A'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
      B='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore1/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'B'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
      C='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore1/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'C'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
    
    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Update store1 with 'B=2' </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfStore2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                   </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore1/*[local-name() = 'updateStore']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'B'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pValue</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vStore2</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfStore2)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Get A, B, C from the store2: A is 1, B is 2,
                                      the rest must be 0-s </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">      vStore2:
      A='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore2/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'A'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
      B='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore2/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'B'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
      C='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore2/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'C'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
    
    </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Update store2 with 'C=3' </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vrtfStore3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                   </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore2/*[local-name() = 'updateStore']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'C'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">        &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pValue</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">      &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;

</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">vStore3</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;
                  </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">msxsl:node-set($vrtfStore3)/*</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">    &lt;!--</span><span style="color: #000080; background-color: #D9D9BD; font-weight: bold;"> Get A, B, C from the store3: A is 1, B is 2, C is 3,
                                      the rest must be 0-s </span><span style="color: #0000FF; background-color: #D3ECEF;">--&gt;
</span><span style="background-color: #D3ECEF; font-weight: bold;">      vStore3:
      A='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore3/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'A'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
      B='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore3/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'B'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
      C='</span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates
</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">                      </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">$vStore3/*[local-name() = 'getValue']</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">           &lt;</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;"></span><span style="color: #800080; background-color: #D3ECEF;">name</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">pName</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot; </span><span style="color: #800080; background-color: #D3ECEF;">select</span><span style="color: #0000FF; background-color: #D3ECEF;">=&quot;</span><span style="color: #000000; background-color: #D3ECEF; font-weight: bold;">'C'</span><span style="color: #0000FF; background-color: #D3ECEF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D3ECEF;">         &lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;</span><span style="background-color: #D3ECEF; font-weight: bold;">'
   </span><span style="color: #0000FF; background-color: #D3ECEF;">&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D3ECEF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D3ECEF;">&gt;
</span></pre>
</table>

<p>The result from the above test is:</p>

<table class="code" border="0" cellspacing="0" cellpadding="0" width="100%" bgcolor="#FFFF80">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 8pt; color: #000000; background-color: #FFFF80;"><span style="background-color: #FFFF80; font-weight: bold;">      vStore0:
      A='0'
      B='0'
      C='0'


      vStore1:
      A='1'
      B='0'
      C='0'


      vStore2:
      A='1'
      B='2'
      C='0'


      vStore3:
      A='1'
      B='2'
      C='3'

</span></pre>
</table>

<h2><a name="Conclusion">Conclusion</a></h2>

<p>This article demonstrated and explained the details of an XSLT
implementation of three major ways of dynamically creating
functions and using them:</p>

<ul type="disc">
<li>Single and multiple function composition.</li>

<li>Currying of functions and partial application of curried
functions.</li>

<li>Lambda expressions.</li>
</ul>

<p>The XSLT implementation of partial application is more powerful
than the Haskell one, because it allows binding of arguments
regardless of order. At the same time partial application in XSLT
is very convenient, using the traditional XSLT way of specifying
arguments through <font class="c">xsl:with-param</font>.</p>

<p>Currying and partial application support has been included in
the latest release of the functional programming library
<b>FXSL</b>.</p>

<p>Also demonstrated was a general way to model and implement in
XSLT objects having inheritance and virtual functions.</p>

<h2><a name="Resources">Resources</a></h2>

<p><a name="Res-1">[1]</a> <a href="../FuncProg/Functional Programming.html">The
Functional Programming Language XSLT - A proof through
example</a></p>

<p>By <a
href="http://www.topxml.com/members/profile.asp?id=i1005">D.Novatchev</a></p>

<p>The first in a series of articles, demonstrating the
implementation of functional programming in XSLT and its practical
use.</p>

<p><b><a name="Res-2">[2]</a></b><a
href="http://www.md.chalmers.se/~rjmh/Papers/whyfp.html"
target="_blank">Why Functional Programming Matters</a></p>

<p>By <a href="http://www.cs.chalmers.se/~rjmh"
target="_blank">John Hughes</a></p>

<p>A brilliant paper, explaining the essence and beauty of the most
important FP concepts. Multiple, very nice examples. Beautiful and
elegant -- this is a "must read" for everyone who needs to
understand what FP is all about.</p>

<p><a name="Res-3">[3]</a> <a
href="http://sourceforge.net/project/showfiles.php?group_id=53841">The
FXSL functional programming library</a></p>

<p>A download from the project release files at sourceforge.net. Contains the source code of the
functions from [1] and much more. FXSL editions exist for: Saxon,
MSXML and Xalan (adapted by Knut Wannheden).</p>

<p><a name="Res-4">[4]</a> Church, A. 1941. <i>The Calculi of Lambda Conversion</i>.
Princeton, NJ: Princeton University Press.</p>

<p><a name="Res-5">[5]</a> <a href="http://www.haskell.org/hugs/">The Haskell
Interpreter <strong>Hugs</strong></a></p>

<p>This small, portable Haskell interpreter written in C runs on
almost any machine. Hugs is best used as a Haskell program
development system: it boasts extremely fast compilation, supports
incremental compilation, and has the convenience of an interactive
interpreter. Available for all Unix platforms including Linux, DOS,
Windows 3.x, and Win 32 (Windows 95, Win32s, NT) and Macintoshs. It
has many libraries including Win32 libraries, a foreign interface
mechanism to facilitate interoperability with C and the Windows
version has a simple graphical user interface.</p>

<p><a name="Res-6">[6]</a> <i><a
href="http://www.cs.ukc.ac.uk/people/staff/sjt/craft2e/"><em>Haskell:
The Craft of Functional Programming</em></a></i></p>

<p>By Simon Thompson,</p>

<p>Second Edition, Addison-Wesley, 507&nbsp;pages, paperback, 1999.
ISBN 0-201-34275-8.</p>

<p>This book is essential reading for beginners to functional
programming and newcomers to the Haskell programming language. The
emphasis is on the process of crafting programs and the text
contains many examples and running case studies, as well as advice
and program design, testing, problem solving and how to avoid
common pitfalls.</p>

<table border="0" cellpadding="1" cellspacing="1" width="100%"><tr>
<td valign="top" align="right">
<p>&nbsp;</p>
</td>
<td valign="top" align="right" width="150">
&nbsp;&nbsp;</td></tr></table>
 </td>
  </tr>
 </table>
<a target="_top" href="#">
<img name=im src="http://t1.extreme-dm.com/i.gif" height=38
border=0 width=41 alt=""></a><script language="javascript"><!--
an=navigator.appName;d=document;function
pr(){d.write("<img src=\"http://t0.extreme-dm.com",
"/0.gif?tag=dimitren&j=y&srw="+srw+"&srb="+srb+"&",
"rs="+r+"&l="+escape(d.referrer)+"\" height=1 ",
"width=1>");}srb="na";srw="na";//-->
</script><script language="javascript1.2"><!--
s=screen;srw=s.width;an!="Netscape"?
srb=s.colorDepth:srb=s.pixelDepth;//-->
</script><script language="javascript"><!--
r=41;d.images?r=d.im.width:z=0;pr();//-->
</script><noscript><img height=1 width=1 alt="" 
src="http://t0.extreme-dm.com/0.gif?tag=dimitren&j=n"></noscript>

 	  <p align="center">
		  <a href="http://sourceforge.net">
		   <img src="http://sourceforge.net/sflogo.php?group_id=53841&amp;type=6" 
		        width="210" height="62" border="0" alt="SourceForge.net Logo">
		  </a>
	  </p>

</body>
</html>

