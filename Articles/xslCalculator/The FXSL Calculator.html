<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>An XSL Calculator: The Math Modules of FXSL</title>
<meta NAME='description' CONTENT='An XSL Calculator: The Math Modules of FXSL'>
<style type="text/css">
 :link { color: blue }
 :visited { color: purple }
 p.c2 {font-weight: bold}
 p.c1 {text-align: center} 
 p.cc {font-family: Courier New; font-size: 10pt;}
 font.c {font-family: Courier New; font-size: 10pt;}
</style>
</head>
<body>

<table border="0" cellspacing="0">
	<tr>
<td width="100%">
<!-- Navigation --><table border="0" cellpadding="1" cellspacing="1" width="100%"><tr>
<td valign="top" align="right">
<p>&nbsp;</p>
</td>
<td valign="top" align="right" width="150">
&nbsp;&nbsp;</td></tr></table><table align="right" cellPadding="0" cellSpacing="0" class="tablelayout" width="30%">
<tr>	<th align="middle" width="100%">Table of Contents</th></tr><tr><td bgColor="#ececff" width="100%"><br>	<font size="1"><IMG border="0" height="11" src="condensed.gif" width="11">&nbsp;<A href="#Introduction"><font size="1">Introduction</font></a><br>
	<font size="1">•&nbsp;</font><A href="#The_Trigonometric_Functions"><font size="1">1. The Trigonometric Functions</font></a><br>
	<font size="1">•&nbsp;</font><A href="#2._The_Hyperbolic-Trigonometric_Functions"><font size="1">2. The Hyperbolic-Trigonometric Functions</font></a><br>
	<font size="1">•&nbsp;</font><A href="#3._The_Exponential_and_Logarithmic_Functions"><font size="1">3. The Exponential and Logarithmic Functions</font></a><br>
	<font size="1">•&nbsp;</font><A href="#4._Solving_Equations_of_One_Real_Variable"><font size="1">4. Solving Equations of One Real Variable</font></a><br>
	<font size="1">•&nbsp;</font><A href="#5._Inverse_Functions"><font size="1">5. Inverse Functions</font></a><br>
	<font size="1">•&nbsp;</font><A href="#6._Putting_it_All_Together_-_the_XSLT_Calculator"><font size="1">6. Putting it All Together - the XSLT Calculator</font></a><br>
	<font size="1">•&nbsp;</font><A href="#Conclusion"><font size="1">Conclusion</font></a><br>
	<font size="1">•&nbsp;</font><A href="#Resources"><font size="1">Resources</font></a><br>
	<br><br></font></font></td></tr></table>
<div>
<h1>An XSL Calculator: The Math Modules of FXSL</h1>

<p class="c1">Dimitre Novatchev, April-May 2002</p>

<p></p>

<p>This article is a follow-up from three recent publications <a href="#res1">[1]</a>,
<a href="#res2">[2]</a>, <a href="#res3">[3]</a> on functional programming in XSLT. Described are various
new modules of the XSLT functional programming library <b>FXSL</b>
<a href="#res4">[4]</a>, which implement trigonometric and hyperbolic-trigonometric,
exponential and logarithmic functions and their reverse functions.
Also implemented are two general methods of solving equations of
one real variable. These are used within an XSLT Calculator - an
interactive XSLT application driven entirely by a single
stylesheet, which depends on an external object for its IO. The
code of the implementation demonstrates the use of such powerful,
functional programming design patterns as partial application and
creation of functions dynamically.</p>

<br />
This article is dedicated to 
<a href="http://www.topxml.com/members/profile.asp?id=i1001"><b>Trace Wilson</b></a>, 
the webmaster of <a href="http://www.topxml.com">TopXML.com</a>, 
who has helped me enormously in editing and publishing the first three 
articles about the FXSL library.
<br /><br />
<p><b>Downloads:</b></p>
<p><a href="xslCalc.zip">
<img border="0" src="zip.jpg"></a>&nbsp;
<a href="xslCalc.zip">The XSL Calculator specific download is here&nbsp; </a></p>
In order to run the XSL Calculator you'll also need 
<a href="http://msdn.microsoft.com/downloads/default.asp?url=/downloads/sample.asp?url=/msdn-files/027/001/766/msdncompositedoc.xml">MSXML4</a>
 and the <a href="http://prdownloads.sourceforge.net/fxsl/fxsl-MS-1.1.zip?download">MSXML edition of FXSL</a>.</p>
<p>The source code described in this article is part of the <b>FXSL</b> library version 1.1 
and can be downloaded <a href="http://sourceforge.net/project/showfiles.php?group_id=53841">here</a>:</p>
<p><a href="http://prdownloads.sourceforge.net/fxsl/fxsl-MS-1.1.zip?download">
<img border="0" src="zip.jpg"></a>&nbsp;
Using MSXML?&nbsp; <a href="http://prdownloads.sourceforge.net/fxsl/fxsl-MS-1.1.zip?download">Get the MSXML source code!</a></p>

<p><a href="http://prdownloads.sourceforge.net/fxsl/fxsl-Saxon-1.1.zip?download"><img border="0" src="zip.jpg"></a>&nbsp;
Using SAXON?&nbsp; <a href="http://prdownloads.sourceforge.net/fxsl/fxsl-Saxon-1.1.zip?download">Get the SAXON source code!</a></p>

<p><a href="http://prdownloads.sourceforge.net/fxsl/fxsl-Xalan-1.1.zip?download"><img border="0" src="zip.jpg"></a>&nbsp;
Using XALAN?&nbsp; <a href="http://prdownloads.sourceforge.net/fxsl/fxsl-Xalan-1.1.zip?download">Get the XALAN source code as adapted by Knut Wannheden !</a></p>

<p></p>

<h2><a name="Introduction">Introduction</a></h2>

<p>Until now the predominant belief has been that XSLT is not a
full-blown programming language and using extension functions is
the only way to perform "unsuitable tasks" such as calculating the
values of various math functions, performing numerical
differentiation and integration, solving equations, random number
generation, text processing, etc. Another popular belief is that it
is impossible to have completely stand-alone XSLT applications,
which can lead their own continuous interactive dialog with the
user while performing their tasks.</p>

<p>People are now gradually starting to understand that such
beliefs are wrong. The previous three publications <a href="#res1">[1]</a>, <a href="#res2">[2]</a>, <a href="#res3">[3]</a>
about FXSL <a href="#res4">[4]</a> show that it is possible to perform such tasks
within an XSLT transformation without resorting to extension
functions written in another programming language.</p>

<p>The purpose of this article is to introduce the math modules of
FXSL and to demonstrate their use within a standalone interactive
XSLT Calculator program.</p>

<h2><a name="The_Trigonometric_Functions">The Trigonometric Functions</a></h2>

<p>Why would one need trigonometric functions in an XSLT
transformation? There are a number of cases these might be needed.
One example is when a transformation must produce SVG output for
drawing a pie chart <a href="#res5">[5]</a>.</p>

<p></p>

<p>The following trigonometric functions have been implemented in
the trignm.xsl module:</p>

<p></p>

<TABLE cellSpacing=0 cellPadding=0 width=720 border=1>
  <TBODY>
  <TR bgColor=#95e89b>
    <TD vAlign=top>
      <P class=c1><FONT face=Arial>Functions</FONT></P></TD>
    <TD vAlign=top>
      <P class=c1><FONT face=Arial>Parameters</FONT></P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P><FONT face=Arial>sin()&nbsp;&nbsp; -- the sinus function</FONT></P>
      <P><FONT face=Arial>cos()&nbsp; -- the co-sinus function</FONT></P></TD>
    <TD vAlign=top rowSpan=3>
      <P><FONT face=Arial>pX&nbsp;&nbsp;&nbsp;&nbsp; - the angle specified in 
      radians or degrees&nbsp;&nbsp;&nbsp; </FONT></P>
      <P><FONT face=Arial>pUnit - [optional] the measurement unit of the 
      given<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      angle pX;<SPAN class=265271614-16062002> </SPAN>specify 'deg' for degrees 
      or 'rad'&nbsp;<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>for&nbsp;radians<SPAN class=265271614-16062002> 
      </SPAN>(default)</FONT></P>
      <P><FONT face=Arial>pEps&nbsp; - [optional] accuracy required - 
      increase<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accuracy, 
      but at the expense of<SPAN class=265271614-16062002> 
      <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>performance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P><FONT face=Arial>tan()&nbsp; -- the tangent function</FONT></P>
      <P><FONT face=Arial>cot()&nbsp; -- the cotangent<SPAN 
      class=265271614-16062002> </SPAN>function</FONT></P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P><FONT face=Arial>sec()&nbsp; -- the secant function</FONT></P>
      <P><FONT face=Arial>csc()&nbsp; -- the cosecant 
  function</FONT></P></TD></TR></TBODY></TABLE>

<p></p>

<p>The source code is presented bellow. The well-known Taylor power
series is used for calculating the sin() function:</p>

<p>
<DIV><FONT face="Courier New" size=2>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
class=265271614-16062002> </SPAN>x<SUP>3</SUP>&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
class=265271614-16062002>&nbsp; </SPAN>x<SUP>5</SUP>&nbsp;&nbsp;&nbsp;<SPAN 
class=265271614-16062002>&nbsp;&nbsp; </SPAN>x<SUP>7</SUP>&nbsp;<BR>sin x = x 
-&nbsp;<SPAN class=265271614-16062002>-</SPAN>--&nbsp;<SPAN 
class=265271614-16062002> </SPAN>+&nbsp;<SPAN class=265271614-16062002> 
-</SPAN>--&nbsp;<SPAN class=265271614-16062002> </SPAN>-&nbsp;<SPAN 
class=265271614-16062002> -</SPAN>-- +&nbsp;<SPAN class=265271614-16062002>... 
</SPAN><FONT face="Times New Roman" size=3>for any real</FONT> 
x<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
class=265271614-16062002>&nbsp;&nbsp; </SPAN>3!&nbsp;&nbsp;&nbsp;<SPAN 
class=265271614-16062002>&nbsp;&nbsp; </SPAN>5!&nbsp;&nbsp;&nbsp;<SPAN 
class=265271614-16062002>&nbsp;&nbsp; </SPAN>7!</P></FONT></DIV>

<p></p>

<p>It is the most natural approach to use a recursive named
template to calculate every next partial sum, and the only things
to note are the following:</p>

<p>The alternating sign of the elements of the series could pause a
problem and in a naïve implementation the sign could be passed as a
separate parameter. This would slow down the calculations. In our
implementation the next element of the series is calculated in the
following, more efficient way:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0"
bgcolor="#D7FFFF"  width="100%">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="background-color: #D7FFFF; font-weight: bold;">    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vnewElem</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
         </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">-$pElem*$pX2 div ($vnextN*($vnextN - 1))</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span></pre>
</td>
</tr>
</table>



<p></p>

<p>We are using a common prologue-wrapper, which is called to
perform once-only initialization for all of the functions. A
typical use of the wrapper looks like this:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0"
bgcolor="#ccffff" width="100%">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="background-color: #D7FFFF; font-weight: bold;">    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_trigWrapper</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vstTop/trigSin:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr>
</table>

<p></p>

<p>The _<b>trigWrapper</b> first converts x to radians, in case the
value of the <b>pUnit</b> parameter is not 'rad'. It then invokes
the appropriate function body.</p>

<p></p>

<p>A naïve implementation will not distinguish the case when the
absolute value of x is too large and will calculate the Taylor
series to the specified accuracy. However, when <font class="c">|x|</font> is big, a very
big number of iterations is required to calculate the value of the
function to the desired accuracy. In our implementation we are
calling an auxiliary template named <font class="c">_cutIntervals</font>, which scales 
<font class="c">x</font>
to a value <font class="c">x'</font> in the interval <font class="c">[0, 2*pi]</font>, so that 
<font class="c">sin(x) =
sin(x')</font>.</p>

<p></p>

<p>We do not calculate any other Taylor series for the rest of the
functions, using instead the following well-known trigonometric
identities:</p>

<p></p>

<DIV><FONT face="Times New Roman" size=3>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
pi<BR></FONT><FONT face="Courier New" size=2>cos(x) = sin(--- - 
x)<BR></FONT><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sin(x)<BR></FONT><FONT 
face="Courier New" size=2>tan(x) = ------<BR></FONT><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cos(x)</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1<BR></FONT><FONT face="Courier New" size=2>cot(x) = ------<BR></FONT><FONT 
face="Courier New" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
tan(x)</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1<BR></FONT><FONT face="Courier New" size=2>sec(x) = ------<BR></FONT><FONT 
face="Courier New" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
cos(x)</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
pi<BR></FONT><FONT face="Courier New" size=2>csc(x) = sec(---- - 
x)<BR></FONT><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2</FONT></P></FONT></DIV>

<p></p>

<p>Here is the code of the <b>trignm.xsl</b> module:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" 
bgcolor="#D7FFFF"  width="100%">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">===================================================================
 Stylesheet: trignm.xsl.xsl                                        
    Version: 1.0 (2002-03-13)                                      
     Author: Dimitre Novatchev                                     
     Notice: Copyright (c)2002 D.Novatchev  ALL RIGHTS RESERVED.   
             No limitation on use - except this code may not be    
             published, in whole or in part, without prior written 
             consent of the copyright owner.                       
                                                                   
     Acknowledgements:                                             
             The documentation to this file, the general           
             documenting style and some efficiency optimisation    
             are work of Martin Rowlinson                          
===================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">version</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
  </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
  </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:trigSin</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:trigSin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:trigCos</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:trigCos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
  </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:trigTan</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:trigTan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:trigCot</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:trigCot</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
  </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:trigSec</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:trigSec</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:trigCsc</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:trigCsc</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
  </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:x</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:trig_lib.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
  </span><span style="color: #800080; background-color: #D7FFFF;">exclude-result-prefixes</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">xsl trigSin trigCos trigTan trigCot 
  trigSec trigCsc</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;

&lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">  ================================================================
    Module Interface:                                             
  ================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;


</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">    Template: sin                                                  
     Purpose: Return the sine of X                                 
  Parameters:-                                                     
    $pX    - the angle (specified in radians or degrees-see $pUnit)
    $pUnit - [optional] the unit of the given angle &#163;pX            
             specify 'deg' for degrees or                          
                     'rad' for radians (default)                   
    $pEps  - [optional] accuracy required                          
             increase the number of decimal places for greater     
             accuracy but at the expense of performance.           
  =================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">sin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'rad'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_trigWrapper</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vstTop/trigSin:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">  =================================================================
    Template: cos                                                  
     Purpose: Return the cosine of X                               
  Parameters:-                                                     
    $pX    - the angle (specified in radians or degrees-see $pUnit)
    $pUnit - [optional] the unit of the given angle &#163;pX            
             specify 'deg' for degrees or                          
                     'rad' for radians (default)                   
    $pEps  - [optional] accuracy required                          
             increase the number of decimal places for greater     
             accuracy but at the expense of performance.           
  =================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">cos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'rad'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_trigWrapper</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vstTop/trigCos:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">  =================================================================
    Template: tan                                                  
     Purpose: Return the tangent of X                              
  Parameters:-                                                     
    $pX    - the angle (specified in radians or degrees-see $pUnit)
    $pUnit - [optional] the unit of the given angle &#163;pX            
             specify 'deg' for degrees or                          
                     'rad' for radians (default)                   
    $pEps  - [optional] accuracy required                          
             increase the number of decimal places for greater     
             accuracy but at the expense of performance.           
  =================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">tan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'rad'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_trigWrapper</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vstTop/trigTan:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">  =================================================================
    Template: cot                                                  
     Purpose: Return the cotangent of X                            
  Parameters:-                                                     
    $pX    - the angle (specified in radians or degrees-see $pUnit)
    $pUnit - [optional] the unit of the given angle &#163;pX            
             specify 'deg' for degrees or                          
                     'rad' for radians (default)                   
    $pEps  - [optional] accuracy required                          
             increase the number of decimal places for greater     
             accuracy but at the expense of performance.           
  =================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">cot</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'rad'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_trigWrapper</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vstTop/trigCot:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">  =================================================================
    Template: sec                                                  
     Purpose: Return the secant of X                               
  Parameters:-                                                     
    $pX    - the angle (specified in radians or degrees-see $pUnit)
    $pUnit - [optional] the unit of the given angle &#163;pX            
             specify 'deg' for degrees or                          
                     'rad' for radians (default)                   
    $pEps  - [optional] accuracy required                          
             increase the number of decimal places for greater     
             accuracy but at the expense of performance.           
  =================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">sec</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'rad'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_trigWrapper</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vstTop/trigSec:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">  =================================================================
    Template: csc                                                  
     Purpose: Return the cosecant of X                             
  Parameters:-                                                     
    $pX    - the angle (specified in radians or degrees-see $pUnit)
    $pUnit - [optional] the unit of the given angle &#163;pX            
             specify 'deg' for degrees or                          
                     'rad' for radians (default)                   
    $pEps  - [optional] accuracy required                          
             increase the number of decimal places for greater     
             accuracy but at the expense of performance.           
  =================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">csc</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'rad'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_trigWrapper</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vstTop/trigCsc:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> defined constant for pi </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pi</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">3.1415926535897</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> ******************************************************** </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> ********************* INTERNAL USE ONLY **************** </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> ******************************************************** </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> defined constants </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">halfPi</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pi div 2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">twicePi</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pi*2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">deg2rads</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pi div 180</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> internal use only - applying functions via _trigWrapper  </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800000; background-color: #D7FFFF;">trigSin:trigSin</span><span style="color: #0000FF; background-color: #D7FFFF;">/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800000; background-color: #D7FFFF;">trigCos:trigCos</span><span style="color: #0000FF; background-color: #D7FFFF;">/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800000; background-color: #D7FFFF;">trigTan:trigTan</span><span style="color: #0000FF; background-color: #D7FFFF;">/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800000; background-color: #D7FFFF;">trigCot:trigCot</span><span style="color: #0000FF; background-color: #D7FFFF;">/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800000; background-color: #D7FFFF;">trigSec:trigSec</span><span style="color: #0000FF; background-color: #D7FFFF;">/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800000; background-color: #D7FFFF;">trigCsc:trigCsc</span><span style="color: #0000FF; background-color: #D7FFFF;">/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">x:vstTop</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">document('')/*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> internally used templates </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_trigWrapper</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'rad'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> convert degrees to radians (when 'deg' specified) </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vRads</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
     </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">(($pUnit = 'rad') * $pX) 
             + ((not($pUnit = 'rad')) * ($pX * $deg2rads))</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> apply the appropriate function </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vRads</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_sin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trigSin:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pY</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">not(0 </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">= $pX and $twicePi &gt; $pX)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_cutIntervals</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pLength</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$twicePi</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_sineIter</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pY*$pY</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pRslt</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pY</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pElem</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pY</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pN</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_sineIter</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pRslt</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pElem</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pN</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vnextN</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pN+2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vnewElem</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
         </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">-$pElem*$pX2 div ($vnextN*($vnextN - 1))</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vnewResult</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                  </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pRslt + $vnewElem</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vdiffResult</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                  </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vnewResult - $pRslt</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vdiffResult &gt; $pEps 
                   or $vdiffResult </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;"> -$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_sineIter</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pRslt</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vnewResult</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pElem</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vnewElem</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pN</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vnextN</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vnewResult</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_cos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trigCos:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_sin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$halfPi - $pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_tan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trigTan:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_pAbort</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vnumHalfPis</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                  </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">floor($pX div $halfPi)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vdiffHalfPi</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                  </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX - $halfPi*$vnumHalfPis</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">-$pEps </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;"> $vdiffHalfPi 
                    and $vdiffHalfPi </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;"> $pEps
                    and $vnumHalfPis mod 2 = 1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$_pAbort</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">terminate</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">              &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> 
</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">              </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">concat('[Error]tan() not defined for x=',
                             $pX)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">Infinity</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vSin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_sin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vCos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_cos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vSin div $vCos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_cot</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trigCot:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vTan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_tan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_pAbort</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vTan = 'Infinity'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">0</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">-$pEps </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;"> $vTan and $vTan </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;"> $pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">terminate</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> 
</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">          </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">concat('[Error]cot() not defined for x=',
                         $pX)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1 div $vTan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_sec</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trigSec:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vCos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_cos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">-$pEps </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;"> $vCos and $vCos </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;"> $pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">terminate</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> 
</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">          </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">concat('[Error]sec() not defined for x=',
                          $pX)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1 div $vCos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_csc</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trigCsc:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_sec</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$halfPi - $pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_cutIntervals</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pLength</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vsignX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX &gt;= 0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">-1</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vdiff</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
        </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pLength*floor($pX div $pLength) -$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;"> 
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vdiff*$pX &gt; 0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vsignX*$vdiff</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">-$vsignX*$vdiff</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr>
</table>

<p></p>

<p>Let's test this implementation:</p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">version</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
 </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;"> 
</span><span style="color: #0000FF; background-color: #D7FFFF;"> &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trignm.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;"> &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> To be applied on any xml file </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;"> &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">method</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp; </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">cos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">240</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'deg'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp; </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr></table>
<p>The result of the above test is:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="720"
bgcolor="#ffff99">
<tr>
<td valign="top">
<p>-0.5000000000079126</p>
</td>
</tr>
</table>

<h2></h2>

<h2><a name="2._The_Hyperbolic-Trigonometric_Functions">2. The Hyperbolic-Trigonometric Functions</a></h2>

<p>The following hyperbolic trigonometric functions are implemented
in the <font class="c">hyper-trignm.xsl</font> module of FXSL:</p>

<p></p>

<TABLE cellSpacing=0 cellPadding=0 width=720 border=1>
  <TBODY>
  <TR bgcolor="#95e89b">
    <TD vAlign=top>
      <P class=c1><FONT face="Courier New" size=2>Functions</FONT></P></TD>
    <TD vAlign=top>
      <P class=c1><FONT face="Courier New" size=2>Parameters</FONT></P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P><FONT face="Courier New" size=2>hsin()&nbsp;&nbsp; -- hyperbolic 
      sinus</FONT></P>
      <P><FONT face="Courier New" size=2>hcos()&nbsp; -- hyperbolic 
      co-sinus</FONT></P></TD>
    <TD vAlign=top rowSpan=3>
      <P><FONT face="Courier New" size=2>pX&nbsp;&nbsp;&nbsp;&nbsp;- the angle 
      specified in<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>radians<SPAN 
      class=265271614-16062002> </SPAN>or degrees<BR>pUnit - [optional] the unit 
      of the<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;given<SPAN class=265271614-16062002> </SPAN>angle pX<SPAN 
      class=265271614-16062002> </SPAN>specify 'deg'<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;for<SPAN class=265271614-16062002> </SPAN>degrees or<SPAN 
      class=265271614-16062002> </SPAN><SPAN 
      class=265271614-16062002>'</SPAN>rad' for<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;radians<SPAN class=265271614-16062002> 
      </SPAN>(default)<BR></FONT><FONT face="Courier New" size=2>pEps&nbsp; - 
      [optional] accuracy<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;required<SPAN class=265271614-16062002> 
      --&nbsp;</SPAN></FONT><SPAN class=265271614-16062002><FONT 
      face="Courier New" size=2>i</FONT></SPAN><FONT face="Courier New" 
      size=2>ncrease<SPAN class=265271614-16062002> 
      <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a</SPAN>curacy,but at 
      the&nbsp;<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>expense<SPAN class=265271614-16062002> </SPAN>of 
      performance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P><FONT face="Courier New" size=2>htan()&nbsp; -- the hyperbolic 
      tangent</FONT></P>
      <P><FONT face="Courier New" size=2>hcot()&nbsp; -- the hyperbolic 
      cotangent</FONT></P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P><FONT face="Courier New" size=2>hsec()&nbsp; -- the hyperbolic 
      secant</FONT></P>
      <P><FONT face="Courier New" size=2>hcsc()&nbsp; -- the hyperbolic 
      cosecant</FONT></P></TD></TR></TBODY></TABLE>

<p></p>

<p></p>

<p></p>

<p>The implementation of the hyperbolic trigonometric functions
follows exactly the same way as what described above for normal
trigonometric functions. What is different is the specific Taylor
series for <font class="c">hsin()</font> and also the different identities we are using in
this case:</p>

<p></p>

<DIV><FONT face="Times New Roman" size=3>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
x<SUP>3</SUP>&nbsp;&nbsp;&nbsp; x<SUP>5</SUP>&nbsp;&nbsp;&nbsp;&nbsp; 
x</FONT><FONT face="Courier New"><FONT size=2><SUP>7<BR></SUP>hsin x = x + --- + 
--- + --- +&nbsp;<SPAN class=265271614-16062002>...</SPAN>&nbsp;&nbsp;&nbsp; for 
any real x<BR></FONT></FONT><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
3!&nbsp;&nbsp;&nbsp; 5!&nbsp;&nbsp;&nbsp; 7!</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" size=2>hcos(x) = sqrt(1 + 
sin<SUP>2</SUP>(x))</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
hsin(x)<BR></FONT><FONT face="Courier New" size=2>htan(x) = 
------<BR></FONT><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hcos(x)</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1<BR></FONT><FONT face="Courier New" size=2>hcot(x) = ------<BR></FONT><FONT 
face="Courier New" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
htan(x)</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1<BR></FONT><FONT face="Courier New" size=2>hsec(x) = ------<BR></FONT><FONT 
face="Courier New" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
hcos(x)</FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" size=2></FONT></P>
<P><FONT face="Courier New" 
size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1<BR></FONT><FONT face="Courier New" size=2>hcsc(x) = ------<BR></FONT><FONT 
face="Courier New" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
hsin(x)</FONT></P></FONT></DIV>

<p></p>

<p>The source code of the hyper-trignm.xsl module of FXSL can be
found in the downloads for this article.</p>

<p></p>

<p>Let's test this implementation:</p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">version</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
 </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">hyper-trignm.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;"> &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> To be applied on any xml file </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">method</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">hcos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr>
</table>

<p></p>

<p>And the result from this transformation is:</p>

<table border="1" cellspacing="0" cellpadding="0" width="720"
bgcolor="#ffff99">
<tr>
<td valign="top">
<p>1.5430806348146772</p>
</td>
</tr>
</table>

<h2><a name="3._The_Exponential_and_Logarithmic_Functions">3. The Exponential and Logarithmic Functions</a></h2>

<p>The following exponential and logarithmic functions have been
implemented in the FXSL module <font class="c">exp.xsl</font>:</p>

<p></p>

<p></p>

<p></p>

<p></p>

<TABLE cellSpacing=0 cellPadding=0 width=720 border=1 >
  <TBODY>
  <TR bgcolor="#95e89b">
    <TD vAlign=top>
      <P class=c1>Functions</P></TD>
    <TD vAlign=top>
      <P class=c1>Parameters</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>exp()&nbsp;&nbsp;</P>
      <P>ln()</P>
      <P>log10()</P>
      <P>log2()</P></TD>
    <TD vAlign=top>
      <P>pX&nbsp;&nbsp;&nbsp;&nbsp;- the real value X</P>
      <P>pEps&nbsp;- [optional] accuracy required - increase<SPAN 
      class=265271614-16062002> </SPAN>accuracy, but at the expense of<SPAN 
      class=265271614-16062002>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>performance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>log()&nbsp;</P></TD>
    <TD vAlign=top>
      <P>pX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- the real value X</P>
      <P>pBase&nbsp;&nbsp;- [optional] the value for the base&nbsp;of&nbsp;the 
      logarithm (10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P>
      <P>pEps&nbsp;&nbsp;&nbsp;- [optional] accuracy required - increase<SPAN 
      class=265271614-16062002> </SPAN>accuracy, but at the expense of<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>&nbsp;<SPAN 
      class=265271614-16062002>&nbsp;&nbsp; 
      </SPAN>performance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>pow()</P></TD>
    <TD vAlign=top>
      <P>pBase&nbsp;&nbsp;&nbsp;<SPAN class=265271614-16062002>&nbsp; 
      </SPAN>-&nbsp; the positive real value for the base</P>
      <P>pPower&nbsp; - the real value X, to be used in&nbsp;calculating 
      base^X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P>
      <P>pEps&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=265271614-16062002>&nbsp; 
      </SPAN>- [optional] accuracy required - increase<SPAN 
      class=265271614-16062002> </SPAN>accuracy, but at the expense of<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>&nbsp;<SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>performance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P></TD></TR></TBODY></TABLE>

<p></p>

<p>Here we use the following Taylor series for e<sup>x</sup> and
ln(x), and the following two identities:</p>

<p></p>

<DIV>
<P style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Times New Roman'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US">&nbsp;
<o:p></o:p></SPAN></P>
<P style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="mso-text-raise: -3.0pt">x</SPAN><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><SPAN 
lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US; mso-text-raise: -3.0pt">x<SUP>2</SUP> 
</SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="mso-text-raise: -3.0pt">x<SUP>3</SUP></SPAN><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; <BR></SPAN></SPAN><SPAN 
lang=EN-US style="mso-ansi-language: EN-US">e<SUP>x</SUP></SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"> = 1 + ---<SPAN 
style="mso-spacerun: yes">&nbsp; </SPAN>+ --- + --- +&nbsp;<SPAN 
class=265271614-16062002>...</SPAN><SPAN style="mso-spacerun: yes">&nbsp;&nbsp; 
</SPAN></SPAN><SPAN lang=EN-US style="mso-ansi-language: EN-US">for any 
real</SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"> 
x<o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>1!<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>2!<SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>3!<o:p></o:p></SPAN></P>
<P style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US">&nbsp;<o:p></o:p></SPAN></P>
<P style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="mso-text-raise: -3.0pt">x<SUP>2</SUP></SPAN><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><SPAN 
lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US; mso-text-raise: -3.0pt">x<SUP>3</SUP> 
</SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="mso-text-raise: -3.0pt">x<SUP>4</SUP></SPAN><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><SPAN 
lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US"><o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US">ln(1+x) = x - 
---<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>+ --- - ---- +&nbsp;<SPAN 
class=265271614-16062002>...</SPAN> </SPAN><SPAN lang=EN-US 
style="mso-ansi-language: EN-US">for any real</SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"> </SPAN><SPAN 
lang=EN-US 
style="FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US; mso-bidi-font-size: 12.0pt">x, 
-1 &lt;x &lt;= 1</SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"><o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>2<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>3<SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>4<o:p></o:p></SPAN></P>
<P style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US">&nbsp;<o:p></o:p></SPAN></P>
<P style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>ln(x)<o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US">log<SUB>a</SUB>(x) 
= ------<BR></SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>ln(a)<o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US">&nbsp;<o:p></o:p></SPAN></P></DIV>

<p></p>

<p></p>

<p>x<sup>y</sup> = e<sup>y*ln(x)</sup></p>

<p></p>

<p>With the exception of <font class="c">ln(1 + x)</font> the implementation is most
straightforward.</p>

<p></p>

<p>In order to be able to calculate <font class="c">ln(1 + x)</font> however, we need to
scale <font class="c">x</font> into <font class="c">x'</font> first, so that <font class="c">x'</font> 
 belongs in the interval, for
which the Taylor series above is converging. It is a fact that this
series is converging sufficiently fast if <font class="c">x</font> belongs to the
interval<br />
 <font class="c">[-0.5, 0.5]</font>.</p>

<p></p>

<p>To find a <font class="c">x'</font> with this property, we have to successively divide
<font class="c">x</font> by <font class="c">e</font>, then the result again, ... etc, 
until we reach a result <font class="c">x'</font>
lying within the correct interval. In this case, if we have
performed <font class="c">n</font> divisions by <font class="c">e</font>, 
then the final result will be:</p>

<p></p>

<p class="cc">ln (x) = n + ln(x')</p>

<p></p>

<p>Bellow is a snippet, showing the implementation of <font class="c">ln(x)</font>. The
scaling of <font class="c">x</font> into <font class="c">x'</font> is performed using another standard FXSL
function - <font class="c">iterUntil</font>.</p>

<p></p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">      Template: ln                                                 
      Purpose : Return the value of ln(X)                          
    Parameters:                                                    
    $pX       - the real value X, to be used in calculating ln(X)  
    $pEps     - [optional] accuracy required                       
                increase the number of decimal places for greater  
                accuracy   but at the expense of performance.      
  =================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">   &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">ln</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.00000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">not($pX &gt; 0)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">terminate</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of
</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">         </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">concat('[Error]ln: non-positive argument passed:',
                        $pX)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vrtfReduceArg</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;</span><span style="color: #800000; background-color: #D7FFFF;">cnt</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">0</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800000; background-color: #D7FFFF;">cnt</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;</span><span style="color: #800000; background-color: #D7FFFF;">x</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D7FFFF;">x</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vCondInInterval</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
                   </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:st/fCondInInterval:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vScaleByE</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
                   </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:st/fScaleByE:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vrtfScaledArg</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">iterUntil</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">           &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pCond</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vCondInInterval</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">           &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vScaleByE</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">           &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
                </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vendor:node-set($vrtfReduceArg)/*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vIntTerm</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
     </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vendor:node-set($vrtfScaledArg)/cnt</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vFracTerm</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
     </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vendor:node-set($vrtfScaledArg)/x</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vPartResult</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">lnIter</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">           &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vFracTerm - 1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">           &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pRslt</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vFracTerm - 1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">           &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pElem</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vFracTerm - 1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">           &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pN</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">           &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vIntTerm + $vPartResult</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">   &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">   
</span><span style="color: #0000FF; background-color: #D7FFFF;">   &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">fCondInInterval:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">number($arg1[name()='x'])</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vX &gt;= 0.5 
                     and $vX </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">= 1.5</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">1</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">0</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">   &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">   
</span><span style="color: #0000FF; background-color: #D7FFFF;">   &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">fScaleByE:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vCnt</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                   </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">number($arg1[name()='cnt'])</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                   </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">number($arg1[name()='x'])</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vX &gt; 1.5</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;</span><span style="color: #800000; background-color: #D7FFFF;">cnt</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vCnt + 1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D7FFFF;">cnt</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;</span><span style="color: #800000; background-color: #D7FFFF;">x</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vX div $vE</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D7FFFF;">x</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;</span><span style="color: #800000; background-color: #D7FFFF;">cnt</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vCnt - 1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D7FFFF;">cnt</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">         &lt;</span><span style="color: #800000; background-color: #D7FFFF;">x</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vX * $vE</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;&lt;/</span><span style="color: #800000; background-color: #D7FFFF;">x</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">   &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">   

</span></pre>
</td>
</tr>
</table>

<p></p>

<p>The complete source code of all functions can be found in the
FXSL module exp.xsl.</p>

<p></p>

<p>Here is a simple test, in which we want to find the 10-th root
of 1024:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">version</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
 </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;"> 
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">exp.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;"> &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> To be applied on any xml file </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">method</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pow</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pBase</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1024</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pPower</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">.1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr>
</table>

<p></p>

<p>And the result is:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="720"
bgcolor="#ffff99">
<tr>
<td valign="top">
<p>1.999999999538168</p>
</td>
</tr>
</table>

<h2><a name="4._Solving_Equations_of_One_Real_Variable">4. Solving Equations of One Real Variable</a></h2>

<p>In this section we are going to describe the FXSL implementation
of two methods for solving the following equation:</p>

<p></p>

<p class="cc">F(x) = 0<br />
</p>

<p>where <font class="c">x</font> is variable having real values in some interval
<font class="c">[x<sub>1</sub>, x<sub>2</sub>]</font></p>

<p></p>

<p>One of the methods (Newton-Raphson) requires that <font class="c">F(x)</font> has a
first derivative <font class="c">F'(x)</font> in this interval. The second, more general,
binary-search method requires only that <font class="c">F(x)</font> should be continuous
in the above interval.</p>

<h3>4.1 Newton-Raphson's Method</h3>

<p>The sequence:</p>

<p class="cc">x<sub>0</sub>, x<sub>1</sub>, x<sub>2</sub>, x<sub>3</sub>, ...
x<sub>n</sub>, ...</p>

<p></p>

<p>where:</p>

<DIV><SPAN lang=EN-US 
style="FONT-FAMILY: 'Times New Roman'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US">
<P></P></SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US">
<P style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
class=265271614-16062002>&nbsp; </SPAN></SPAN><SPAN 
style="mso-text-raise: -3.0pt">F(</SPAN></SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US; mso-text-raise: -3.0pt">x<SUB>n</SUB>)</SPAN><SPAN 
lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US; mso-text-raise: -3.0pt"> 
<o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US">x<SUB>n+1</SUB> = 
x<SUB>n</SUB> -&nbsp;<SPAN class=265271614-16062002> </SPAN>-------<SPAN 
class=265271614-16062002>-</SPAN></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
class=265271614-16062002>&nbsp; </SPAN></SPAN><SPAN 
style="mso-text-raise: 3.0pt">F’(x<SUB>n</SUB>)<o:p></o:p></SPAN></SPAN></P>
<P style="MARGIN: 0in 0in 0pt">&nbsp;<o:p></o:p></SPAN></P></DIV>

<p></p>

<p><font class="c">x<sub>0</sub></font> is an initial guess for the root. The graphical
interpretation of the formula for obtaining the <font class="c">n+1</font>-th element of
the sequence is that <font class="c">x<sub>n+1</sub></font> is the point in which the
tangent to the graphic of <font class="c">F</font> at 
<font class="c">(x<sub>n</sub>, F(x<sub>n</sub>))</font>
crosses the <font class="c">X</font> axis.</p>

<p>When this sequence converges it converges into the root of the equation
<p class="cc">F(x) = 0<br />
</p>
</p>

<p></p>

<p>One advantage of this method is that it converges very rapidly
(with quadratic speed). A disadvantage is that it requires <font class="c">F(x)</font> to
have a derivative. Also, it is possible if <font class="c">x<sub>0</sub></font> is not
well chosen, that the method will not converge.</p>

<p></p>

<p>Bellow is the XSLT implementation of the <font class="c">findRootNR</font> function, it
simply uses the FXSL function <font class="c">within</font>, that controls the generation
of a sequence, until the last two elements do not differ with more
than a predefined accuracy:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">      Template: findRootNR                                         
      Purpose : Return the root of an equation f(X) = 0,           
                using the Newton-Raphston method                   
    Parameters:                                                    
    $pFun     - a template reference for the function f(X),        
                whose root is to be found                          
    $pFunPrim - a template reference for the derivative of         
                the function f(X)  (f'(X))                         
    $pX0      - a starting element for the sequence to be produced.
                it must be within the domain of f(X)               
    $pEps     - [optional] accuracy required                       
                increase the number of decimal places for greater  
                accuracy but at the expense of performance.        
  =================================================================
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">findRootNR</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFunPrim</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">0.1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vIterator</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                  </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:st/myIterator:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vrtfParams</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #008080; background-color: #D7FFFF; font-weight: bold;">param</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;&lt;/</span><span style="color: #008080; background-color: #D7FFFF; font-weight: bold;">param</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pFunPrim</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">within</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pGenerator</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vIterator</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pParam0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                    </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vendor:node-set($vrtfParams)/*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">Eps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">myIterator:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pList</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pParams</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;     </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">not($pList)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:copy-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pParams[1]/node()</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;     </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;     </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vXn</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pList[last()]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;       
&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vF-Xn</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pParams[2]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;         </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vXn</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;       
&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vFPrim-Xn</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:apply-templates</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pParams[3]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;         </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vXn</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:apply-templates</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;       
&nbsp;&nbsp;       </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vXn - $vF-Xn div $vFPrim-Xn</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;     </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">     &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span></span></pre>
</td>
</tr>
</table>

<p></p>

<p>The Newton-Raphson method is the most widely used practical
technique for solving algebraic equations.</p>

<h3>4.2 Binary-Search Method</h3>

<p>If <font class="c">F(x)</font> is a continuous function in 
<font class="c">[x1, x2], F(x1)*F(x2) &lt;
0</font>, and there is just one root in this interval, we can use the
binary-search method of finding this root.</p>

<p>The binary search method for finding a root builds a sequence of
intervals</p>

<p></p>

<p class="cc">Int<sub>0</sub>, Int<sub>1</sub>, Int<sub>2</sub>, ...,
Int<sub>n</sub>,...</p>

<p></p>

<p>such that <font class="c">Int<sub>0</sub></font> is the initial interval
<font class="c">[x<sub>1</sub>, x<sub>2</sub>]</font>, every next interval
<font class="c">[x<sub>n1</sub>, x<sub>n2</sub>]</font> is half the length of the previous
interval and its bounds are the middle of the previous interval and
one of the bounds of the previous interval, chosen in such way
that<br />
 </p>

<p class="cc">F(x<sub>n1</sub>) * F(x<sub>n2</sub>) &lt; 0</p>

<p></p>

<p>The sequence built from taking a (any) point from each of this intervals is converging into 
the root of the equation:
</p>
<p class="cc">F(x) = 0</p>

<p>The binary-search method is slower (requires more iterations)
than the Newton-Raphson method, and requires that there's just one
root in the interval <font class="c">Int<sub>0</sub></font>. 
However, if these conditions
are satisfied it will always find the root. Also, this method is
more general as it does not require <font class="c">F</font> to have a first derivative in
the interval.</p>

<p></p>

<p>Let's test these two methods now. We want to find the solution
of following equation:</p>

<p></p>

<p class="cc">sin(x) - 0.5 = 0</p>

<p></p>

<p>that is the angle the <font class="c">sinus()</font> of which is <font class="c">0.5</font> 
(we know from
school that this is one sixth of <font class="c">pi</font> or 30 degrees).</p>

<p></p>

<p>test-findRoot.xsl</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">version</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;  
 </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
 </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:myFun</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:myFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:myFunPrim</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">f:myFunPrim</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
 </span><span style="color: #800080; background-color: #D7FFFF;">exclude-result-prefixes</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">xsl myFun myFunPrim</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; &gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">   
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">findRoot.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trignm.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">method</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800000; background-color: #D7FFFF;">myFun:myFun</span><span style="color: #0000FF; background-color: #D7FFFF;">/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800000; background-color: #D7FFFF;">myFunPrim:myFunPrim</span><span style="color: #0000FF; background-color: #D7FFFF;">/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">   
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vArcSin_0.5</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">      
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">findRootNR</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">        
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
                   </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">document('')/*/myFun:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">        
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFunPrim</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
               </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">document('')/*/myFunPrim:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">        
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pi div 4</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">        
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">0.0000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">      
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF; font-weight: bold;">Solution of:         
sin(x) - 0.5 = 0        
Newton-Raphson, x0 = Pi/4        

Result: </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vArcSin_0.5</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF; font-weight: bold;">Pi/6  = </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pi div 6</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">myFun:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">        
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vSineX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">      
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">sin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">        
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">      
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">        
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vSineX - 0.5</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">myFunPrim:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">          
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">cos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">        
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$arg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">      
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr>
</table>

<p></p>

<p>And the result is:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="720"
bgcolor="#ffff99">
<tr>
<td valign="top">

<p class="c2">&nbsp;&nbsp;&nbsp; Solution of:</p>

<p class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
sin(x) - 0.5 = 0</p>

<p class="c2">&nbsp;&nbsp;&nbsp; Newton-Raphson, x0 = Pi/4</p>

<p class="c2">&nbsp;&nbsp;&nbsp; Result: 0.5235987554047098</p>

<p class="c2">&nbsp;&nbsp;&nbsp; Pi/6 =&nbsp;
0.5235987755982833</p>
</td>
</tr>
</table>

<p></p>

<h2><a name="5._Inverse_Functions">5. Inverse Functions</a></h2>

<p>An invertible function is a function that can be inverted. An
invertible function must satisfy the condition that each element in
the domain corresponds to one distinct element that no other
element in the domain corresponds to. That is, all of the elements
in the domain and range are paired-up in monogomous relationships -
each element in the domain pairs to only one element in the range
and each element in the range pairs to only one element in the
domain. Thus, the inverse of a function is a function that looks at
this relationship from the other viewpoint. So, for all elements a
in the domain of <tt>f(x)</tt>, the inverse of <tt>f(x)</tt>
(notation: <tt>f<sup>-1</sup>(x)</tt>) satisfies:<br />
<tt>f(x)=y implies f<sup>-1</sup>(y)=x</tt></p>
<p>With the slightest bit of manipulation, we find that:<br />
<tt>f<sup>-1</sup>(f(a))=a</tt></p>
<p>Yielding the identity function for all inputs in the domain.</p>

<p>In case we need to find <tt>x</tt> such that</p>

<p><tt>f(x) = y</tt></p>

<p>we simply have to find a root of the equation:</p>

<p><tt>f(x) - y = 0</tt></p>

<p>But this is exactly what the
<tt>findRoot()</tt> and <tt>findRootNR()</tt> functions,
defined in the previous chapter, do.</p>

<p>Provided with the above knowledge, it is easy to implement
the two modules of inverse trigonometric and inverse
hyperbolic-trigonometric functions - these are the
<tt>arcTrignm.xsl</tt> and
<tt>arcHTrignm.xsl</tt> modules.</p>

<p>The following reverse-trigonometric functions have been
implemented in the <tt>arcTrignm.xsl</tt>module:</p>

<p></p>

<DIV><SPAN lang=EN-US 
style="FONT-FAMILY: 'Times New Roman'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US">
<P></P></SPAN><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-ansi-language: EN-US"><SPAN lang=EN-US 
style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US"><SPAN 
style="mso-spacerun: yes">
<P></P>
<P style="MARGIN: 0in 0in 0pt">
<TABLE cellSpacing=0 cellPadding=0 width=720 border=1 >
  <TBODY>
  <TR bgcolor="#95e89b">
    <TD vAlign=top>
      <P class=c1>Functions</P></TD>
    <TD vAlign=top>
      <P class=c1>Parameters</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>arcsin()&nbsp;-- the reverse<SPAN 
      class=265271614-16062002>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>sinus 
      function</P>
      <P>arccos()&nbsp;-- the<SPAN class=265271614-16062002> </SPAN>reverse<SPAN 
      class=265271614-16062002> </SPAN>co-<SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>sinus<SPAN 
      class=265271614-16062002> </SPAN>function</P></TD>
    <TD vAlign=top rowSpan=3>
      <P>pX&nbsp;&nbsp;&nbsp;<SPAN class=265271614-16062002> </SPAN>- a value in 
      the<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>&nbsp;<SPAN 
      class=265271614-16062002> </SPAN>appropriate<SPAN 
      class=265271614-16062002> </SPAN>interval<SPAN class=265271614-16062002> 
      </SPAN>pUnit<SPAN class=265271614-16062002> </SPAN>- [optional] 
      the<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>measurement unit of<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;the<SPAN class=265271614-16062002> </SPAN>result&nbsp; 
      angle;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; specify 'deg' 
      for<BR><SPAN class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;degrees or 'rad'<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;for<SPAN class=265271614-16062002> </SPAN>radians 
      (default)<BR>pEps&nbsp; - [optional] accuracy<BR>&nbsp;<SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>required: increase<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      accuracy, but at the<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>&nbsp;<SPAN 
      class=265271614-16062002>&nbsp;&nbsp; </SPAN>expense<SPAN 
      class=265271614-16062002>&nbsp;</SPAN><SPAN 
      class=265271614-16062002>o</SPAN>f&nbsp;<SPAN 
      class=265271614-16062002>p</SPAN>erfor<SPAN 
      class=265271614-16062002>-<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>mance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>arctan()&nbsp;-- the reverse<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>tangent<SPAN class=265271614-16062002> </SPAN>function</P>
      <P>arccot()&nbsp;-- the reverse<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;cotangent<SPAN 
      class=265271614-16062002>&nbsp;</SPAN><BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>function</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>arcsec()&nbsp;-- the reverse<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;secant<SPAN class=265271614-16062002> </SPAN>function</P>
      <P>arccsc()&nbsp;-- the reverse<SPAN 
      class=265271614-16062002>&nbsp;<BR></SPAN><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>cosecant<SPAN class=265271614-16062002> 
  </SPAN>function</P></TD></TR></TBODY></TABLE></P>
<P><TT></TT></P>
<P><FONT face="Times New Roman">The following reverse hyperbolic trigonometric 
functions are implemented in the <TT>arcHTrignm.xsl</TT><TT></TT>module of 
FXSL:</FONT></P>
<P></P>
<P style="MARGIN: 0in 0in 0pt">
<TABLE cellSpacing=0 cellPadding=0 width=720 border=1 >
  <TBODY>
  <TR bgcolor="#95e89b">
    <TD vAlign=top>
      <P class=c1>Functions</P></TD>
    <TD vAlign=top>
      <P class=c1>Parameters</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>archsin()&nbsp;-- reverse<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;hyperbolic sinus</P>
      <P>archcos() -- reverse&nbsp;<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>hyperbolic co-sinus</P></TD>
    <TD vAlign=top rowSpan=3>
      <P>pX&nbsp;&nbsp;&nbsp;- a value in the<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>appropriate interval</P>
      <P></P>
      <P>pEps&nbsp;- [optional] accuracy<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>&nbsp;required:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>increase 
      accuracy, but&nbsp;<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>at 
      the<SPAN class=265271614-16062002> </SPAN>expense of<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>performance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>archtan()-- reverse&nbsp;<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>hyperbolic 
      tangent</P>
      <P>archcot()-- reverse<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;hyperbolic cotangent</P></TD></TR>
  <TR>
    <TD vAlign=top>
      <P>archsec()-- reverse&nbsp;<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>hyperbolic secant</P>
      <P>archcsc()&nbsp;-- reverse<BR><SPAN 
      class=265271614-16062002>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
      </SPAN>&nbsp;hyperbolic cosecant</P></TD></TR></TBODY></TABLE></P>
<P></P>
<P style="MARGIN: 0in 0in 0pt"></SPAN></SPAN>&nbsp;<o:p></o:p></SPAN></P></DIV>

<p></p>

<p>I chose to use the <tt>findRootNR()</tt> function
in implementing reverse trigonometric functions and the
<tt>findRoot()</tt>&nbsp; function in implementing reverse
hyperbolic trigonometric functions.</p>

<p>The implementation of those two FXSL modules is almost
straightforward with the exception of some special issues as the
following:</p>

<p>Both <tt>findRootNR</tt> and 
<tt>findRoot</tt> require as argument a function of one argument
(<tt>f(x)</tt>). <tt>findRootNR</tt> also requires
as argument a second function of one argument
(<tt>f'(x)</tt>).&nbsp; But the function:</p>

<p><tt>y = f(x) - c</tt></p>

<p>is a function of three arguments (<tt>x</tt>,
<tt>c</tt>, and the desired accuracy).</p>

<p>The function</p>

<p><tt>z = f</tt><tt>'</tt><tt>(x)</tt></p>

<p>is a function of two arguments (<tt>x</tt> and the
desired accuracy).</p>
<p>Therefore, we need to produce a curried partial application of each
of the above functions and then to pass these partial applications
to <tt>findRootNR</tt> and <tt>findRoot</tt>,
respectively.</p>

<p>For some of the reverse trigonometric functions the result
has to be scaled into an appropriate interval, e.g.
<tt>(-pi/2, pi/2)</tt> for <tt>tan()</tt> and 
<tt>(0, pi)</tt> for <tt>cot()</tt>.<br />
</p>

<p>In calculating some of the reverse functions of these two FXSL modules
the following identities are used:</p>

<p><tt>arccos(x) = Pi/2 - arcsin(x)</tt></p>

<p><tt>arccot(x) = 1/arctan(x)</tt></p>

<p><tt>arcsec(x) = 1/arccos(x)</tt></p>

<p><tt>arccsc(x) = 1/arcsin(x)</tt></p>

<p><tt>archcos(x) = archsin(sqrt(x<sup>2</sup> - 1))</tt></p>

<p><tt>archtan(x) = archcos(sqrt(1/(1 - x<sup>2</sup>)))</tt></p>

<p><tt>archcot(x) = archtan(1/x)</tt></p>

<p><tt>archsec(x) = archcos(1/x)</tt></p>

<p><tt>archcsc(x) = archsin(1/x)</tt></p>

<p>Here's a code snippet implementing 
<tt>arcsin()</tt>:</p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="background-color: #D7FFFF; font-weight: bold;">  </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">_arcsin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">atrigSin:*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">0.0000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">not(-1 </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">= $pX and $pX </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">= 1)</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">terminate</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">yes</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF; font-weight: bold;"> [Error]: arcSine argument must be within the interval [-1, 1]
      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:message</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX = 0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">0</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX </span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold; font-style: italic;">&amp;lt;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;"> -0.99999999</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">3*$halfPi</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vSinFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                      </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vst/mySinFun:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vCoSFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                      </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$x:vst/mySinFunPrim:*[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;    
&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vrtf-curriedSinFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">curry</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vSinFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pNargs</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">3</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> arg2 is pC </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">            &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg3</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;    
&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vrtf-curriedCoSFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">curry</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vCoSFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pNargs</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;        </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;    
&nbsp;&nbsp;&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">findRootNR</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFun</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vendor:node-set($vrtf-curriedSinFun)/*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pFunPrim</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
           </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vendor:node-set($vrtf-curriedCoSFun)/*</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pi div 6</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pEps</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">0.0000001</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr>
</table>

<p>And here's a small test of one of the reverse trigonometric
functions:</p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">version</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
 </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arcTrignm.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; /&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">method</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arccos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">-1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pUnit</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'deg'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr>
</table>

<p>The result of the above transformation is:</p>

<table border="1" cellspacing="0" cellpadding="0" width="720"
bgcolor="#ffff99">
<tr>
<td valign="top">
<p class="c2">-179.99999999999997</p>
</td>
</tr>
</table>

<h2><a name="6._Putting_it_All_Together_-_the_XSLT_Calculator">6. Putting it All Together - the XSLT Calculator</a></h2>

<p>We have now all that's needed to build our own XSLT Calculator.
The idea is simply to use all functions from the five new FXSL
modules described in this article. In doing this I will demonstrate
a new approach - demonstrate an interactive XSLT application,
totally performed during the lifetime of a single XSLT
transformation. This closely resembles the way, in which the
methods of a monad class <a href="#res6">[6]</a> are defined in Haskell <a href="#res7">[7]</a>.</p>

<p></p>

<p>I am using MSXML and <tt>IXSLProcessor.addObject()</tt>, although the
same approach is easy to use with XSLT processors, which can invoke
extension functions written in Java.</p>

<p></p>

<p>I am also using MS Visual Basic 6, which is handy for creating
quickly the graphical representation and various controls (buttons)
of a calculator. It is possible to achieve the same using HTML and
Javascript and there are several such implementations on the
web.</p>

<p></p>

<p>My VB application is actually a group of two VB projects - one
regular VB exe project and one VB ActiveX component (COM object)
project. The VB exe project has a dummy form, which serves no other
purpose, than to create an instance of the xslCalculator.cls object
and to initiate the XSLT transformation, making available to it the
methods of the class by using the <tt>IXSLProcessor.addObject()</tt> method.
Here's the code of the <tt>Form_Load()</tt> function:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#e6e6e6">
<tr>
<td valign="top">
<p>Private Sub Form_Load()</p>

<p>Dim myObj2 As xslCalculator</p>

<p></p>

<p>Dim xsldoc As New Msxml2.FreeThreadedDOMDocument40</p>

<p>Dim xmldoc As New Msxml2.FreeThreadedDOMDocument40</p>

<p>Dim xsltemp As New Msxml2.XSLTemplate40</p>

<p>Dim xslproc As Msxml2.IXSLProcessor</p>

<p>Dim strFXSLPath</p>

<p></p>

<p><font color="#F4832F">'Modify the path bellow to the actual path to FXSL you have</font></p>

<p>strFXSLPathMS = "E:\xml\msxml\XML
SDK\Samples\Tests\Generic\FP\Fxsl\Msxsl\"</p>

<p>Me.Hide</p>

<p></p>

<p>Set myObj2 = New xslCalculator</p>

<p></p>

<p>xsldoc.Load strFXSLPathMS &amp; "calculator.xsl"</p>

<p>Set xsltemp.stylesheet = xsldoc.documentElement</p>

<p>Set xslproc = xsltemp.createProcessor</p>

<p>xmldoc.loadXML "&lt;t/&gt;"</p>

<p>xslproc.input = xmldoc</p>

<p></p>

<p>xslproc.addObject myObj2, "urn:my-object2"</p>

<p>xslproc.Transform</p>

<p>MsgBox xslproc.output, vbOKOnly, "XSL Calculator"</p>

<p>End</p>

<p></p>

<p>End Sub</p>
</td>
</tr>
</table>

<p></p>

<p>The only method of the <tt>xslCalculator</tt> class is called
<b>dispResult</b>. It has one argument - the result of the previous
calculation. <b>dispResult</b> returns a xml representation of a
user's request for performing an operation. This is done whenever
the user presses a button, which is to trigger an operation, e.g.
"<tt>=</tt>", "<tt>sin</tt>", "<tt>e<sup>x</sup></tt>". Bellow is the code of
<tt>xslCalculator.dispResult</tt>:</p>

<p></p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#e6e6e6">
<tr>
<td valign="top">
<p>Public Function dispResult(strResult As Variant) As
IXMLDOMNodeList</p>

<p>Dim strArg1 As String, strXML As String</p>

<p>Dim xmldoc As New MSXML2.FreeThreadedDOMDocument40</p>

<p>Dim strOp As String</p>

<p>frmCalc.txtUser = strResult</p>

<p>frmCalc.Show vbModal</p>

<p>strOp = frmCalc.strOp</p>

<p>strXML = "&lt;calc&gt;&lt;op&gt;" &amp; strOp &amp;
"&lt;/op&gt;" &amp; _</p>

<p>"&lt;arg&gt;" &amp; frmCalc.strArg1 &amp; "&lt;/arg&gt;" &amp;
_</p>

<p>"&lt;arg&gt;" &amp; frmCalc.strArg2 &amp;
"&lt;/arg&gt;&lt;/calc&gt;"</p>

<p>xmldoc.loadXML strXML</p>

<p>Set dispResult = xmldoc.selectNodes("/")</p>

<p>End Function</p>
</td>
</tr>
</table>

<p></p>

<p>The most important part of our XSLT calculator is the
stylesheet, which performs the requested operations and runs the
dialog with the user until he presses the "Quit" button. Bellow is
its code.</p>

<p></p>

<p class="c2">calculator.xsl</p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">  </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">version</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">1.0</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
 </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">http://www.w3.org/1999/XSL/Transform</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
 </span><span style="color: #FF0000; background-color: #D7FFFF;">xmlns:myObj2</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #FF0000; background-color: #D7FFFF; font-weight: bold;">urn:my-object2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;
 &gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">trignm.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">exp.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arcTrignm.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">hyper-trignm.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:import</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">href</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arcHTrignm.xsl</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:output</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">method</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">text</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; /&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--</span><span style="color: #000080; background-color: #D1DCD1;"> Start the calculator dialog with zero displayed </span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">match</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">keepDialog</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pInput</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                      </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">myObj2:dispResult('0')</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">'Bye!'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; /&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">   This template gets back every new request from the      
   calculator.                                             
   A request has the form:                                 
                                                           
      &lt;calc&gt;                                               
        &lt;op&gt;+&lt;/op&gt;                                         
        &lt;arg&gt;3&lt;/arg&gt;                                       
        &lt;arg&gt;5&lt;/arg&gt;                                       
      &lt;/calc&gt;                                              
                                                           
   When the value of &lt;op&gt; is &quot;q&quot;, then this template does  
   nothing and simply returns, which ends the dialog.      
   Otherwise, every known operation is evaluated using     
   the math functions of FXSL.                             
                                                           
   The template calls itself recursively with the result of
   displaying the result to the user (done via an method of
   an external object). This result is either a new request
   for calculation, or the quit-op (&quot;q&quot;).                  
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">keepDialog</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pInput</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pInput/calc/op</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">not($vOp = 'q')</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vResult</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">evalOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pInput/calc/arg[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pArg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pInput/calc/arg[2]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">keepDialog</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pInput</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">myObj2:dispResult(string($vResult))</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;!--
</span><span style="color: #000080; background-color: #D1DCD1;">      This template simply evaluates the result of the     
      operation specified by its &quot;pOp&quot;, &quot;pArg1&quot; and &quot;pArg2&quot;
</span><span style="color: #0000FF; background-color: #D7FFFF;">--&gt;</span><span style="color: #0000FF; background-color: #D7FFFF;">  
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">evalOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pArg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = '+'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1 + $pArg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = '-'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1 - $pArg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = '*'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1 * $pArg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = '/'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:value-of</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1 div $pArg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'sin'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">sin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'asin'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arcsin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'hsin'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">hsin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'ahsin'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">archsin</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">       &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'cos'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">cos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'acos'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arccos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'hcos'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">hcos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'ahcos'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">archcos</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'tan'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">tan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'atan'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arctan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'htan'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">htan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'ahtan'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">archtan</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'cot'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">cot</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'acot'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arccot</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'hcot'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">hcot</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'ahcot'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">archcot</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'sec'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">sec</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'asec'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arcsec</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'hsec'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">hsec</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'ahsec'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">archsec</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'csc'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">csc</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'acsc'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">arccsc</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'hcsc'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">hcsc</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'ahcsc'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">archcsc</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'e^x'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">exp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'ln(x)'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">ln</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pX</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pOp = 'x^y'</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pow</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pBase</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pPower</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pArg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:when</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;</span><span style="background-color: #D7FFFF; font-weight: bold;">UnKnown Operation!!!</span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:otherwise</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:choose</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:stylesheet</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span></pre>
</td>
</tr>
</table>

<p></p>

<p>The reader is encouraged to download the VB source code, to put
the code of <tt>calculator.xsl</tt> in the same directory as the MSXML
edition of FXSL and to run the calculator. Note, that you'll have
to edit the VB source and set the <tt>strFXSLPathMS</tt> variable to the
actual path to your MSXML edition of FXSL. The place in the code,
where this modification must be done, is marked with an orange
comment in the VB source code above.</p>

<p></p>

<p>A final note is about the use of an extension function in our
transformation. Using extension functions in a pure functional
programming language is dangerous, as it often results in undesired
side-effects. One such side effect is that generally there cannot
be any assumptions about the order, in which extension functions
will be called. However, in the code presented here special care
has been taken that the order of calling <b>myObj2:dispResult()</b>
will be exactly the desired one. Why this is so is beyond the topic
of this article and is explained in detail in <a href="#res6">[6]</a>.</p>

<p></p>

<p>Notice how this is done in the most important part of the code -
the <tt>keepDialog</tt> template:</p>

<table border="1" cellspacing="0" cellpadding="0" width="100%"
bgcolor="#D7FFFF">
<tr>
<td valign="top">
<!-- Highlighted HTML from Xselerator -->
<pre style="font-family: Courier New; font-size: 10pt;; color: #000000; background-color: #D7FFFF;"><span style="background-color: #D7FFFF; font-weight: bold;">  </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">keepDialog</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pInput</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">/..</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pInput/calc/op</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:if</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">test</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">not($vOp = 'q')</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">vResult</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">evalOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$vOp</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pArg1</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pInput/calc/arg[1]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">          &lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pArg2</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
                          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">$pInput/calc/arg[2]</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">        &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:variable</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">      
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">keepDialog</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;      </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:with-param</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"> </span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;"></span><span style="color: #800080; background-color: #D7FFFF;">name</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">pInput</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot; 
          </span><span style="color: #800080; background-color: #D7FFFF;">select</span><span style="color: #0000FF; background-color: #D7FFFF;">=&quot;</span><span style="color: #000000; background-color: #D7FFFF; font-weight: bold;">myObj2:dispResult(string($vResult))</span><span style="color: #0000FF; background-color: #D7FFFF;">&quot;/&gt;
</span><span style="background-color: #D7FFFF;">&nbsp;&nbsp;    </span><span style="color: #0000FF; background-color: #D7FFFF;">&lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:call-template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">    &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:if</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;
</span><span style="color: #0000FF; background-color: #D7FFFF;">  &lt;/</span><span style="color: #800080; background-color: #D7FFFF; font-weight: bold;">xsl:template</span><span style="color: #0000FF; background-color: #D7FFFF;">&gt;

</span></pre>
</td>
</tr>
</table>

<p></p>

<p>And here's a small example of using the XSL Calculator.<br />
 The user calculates <tt>arcos(-1)</tt>. The result is <tt>-Pi</tt> and the precision
is 13 decimal places.</p>

<p>
<img src="Calc1.jpg">
</p>
<p>
<img src="Calc2.jpg">
</p>

<p></p>

<h2><a name="Conclusion">Conclusion</a></h2>

<p>We described the newest 6 modules of FXSL, which implement a 
variety of useful math functions and two
numerical methods of finding the root of a continuous function of
one real variable. Their use was demonstrated through the
construction of a simple yet powerful, accurate and efficient XSL
Calculator. The XSL Calculator also demonstrates a reliable method
of serializing a series of calls to extension functions, closely
following the definition of the Monad class in Haskell.</p>

<h2><a name="Resources">Resources</a></h2>

<p><a name="res1"></a>[1] <a href="http://fxsl.sourceforge.net/articles/FuncProg/Functional%20Programming.html">The
Functional Programming Language XSLT - A proof through example</a>
</p>

<p></p>
By <a
href="http://www.topxml.com/members/profile.asp?id=i1005">D.Novatchev</a></p>

<p></p>

<p>The first in a series of articles, demonstrating the
implementation of functional programming in XSLT and its practical
use.</p>

<p></p>

<p><a name="res2"></a>[2] <a
href="http://fxsl.sourceforge.net/articles/PartialApps/Partial%20Applications.html">Dynamic Functions
using FXSL: Composition, Partial Applications and Lambda
Expressions</a><br />
<br />
By <a
href="http://www.topxml.com/members/profile.asp?id=i1005">D.Novatchev</a><br />

</p>

<p>The second article in the functional programming in XSLT series,
explaining and demonstrating the implementation of some of the most
powerful design patterns of functional programming.</p>

<p></p>

<p><a name="res3"></a>[3] <a href="http://fxsl.sourceforge.net/articles/Random/Casting%20the%20Dice%20with%20FXSL-htm.htm">Casting
the Dice with FXSL: Random Number Generation Functions in
XSLT</a></p>

<p>By <a
href="http://www.topxml.com/members/profile.asp?id=i1005">D.Novatchev</a></p>

<p></p>

<p>The third article in the functional programming in XSLT series, describing the <tt><b>Random.xsl</b></tt> module of FXSL. 
This module makes heavy use of currying and partial applications and also demonstrates
 creating new functions dynamically on the fly.</p>

<p></p>

<p><a name="res4"></a>[4] <a
href="http://sourceforge.net/project/showfiles.php?group_id=53841">The
<b>FXSL</b> functional programming library</a></p>

<p></p>

<p>A download from SourceForge.net. Contains the source code of the
functions from <a href="#res1">[1]</a>, <a href="#res2">[2]</a> , <a href="#res3">[3]</a> and this article, and much more.
<b>FXSL</b> editions exist for: Saxon, MSXML and Xalan (adapted by
Knut Wannheden).</p>

<p></p>
<a name="res5"></a>[5] <a 
href="http://www.topxml.com/code/default.asp?p=3&id=v20020313183135">SVG for drawing a pie chart</a>, 
<br /><br />by <a href="http://www.topxml.com/members/profile.asp?id=i1031">Martin Rowlinson</a></p>

<p><a name="res6"></a>[6] <a 
href="http://research.microsoft.com/Users/simonpj/papers/marktoberdorf/">
Tackling the awkward squad: monadic input/output, concurrency, 
exceptions, and foreign-language calls in Haskell</a>, 
<br /><br />by <a href="http://research.microsoft.com/Users/simonpj/">Simon Peyton Jones</a></p>

<p><a name="res7"></a>[7] <i><a
href="http://www.cs.ukc.ac.uk/people/staff/sjt/craft2e/"><em>Haskell:
The Craft of Functional Programming</em></a></i></p>

<p>By <a href="http://www.cs.ukc.ac.uk/people/staff/sjt/">Simon Thompson</a>,</p>

<p>Second Edition, Addison-Wesley, 507&nbsp;pages, paperback, 1999.
ISBN 0-201-34275-8.</p>

<p>This book is essential reading for beginners to functional
programming and newcomers to the Haskell programming language. The
emphasis is on the process of crafting programs and the text
contains many examples and running case studies, as well as advice
and program design, testing, problem solving and how to avoid
common pitfalls.</p>

<p></p>
</div>
<table border="0" cellpadding="1" cellspacing="1" width="100%"><tr>
<td valign="top" align="right">
<p>&nbsp;</p>
</td>
<td valign="top" align="right" width="150">
&nbsp;		<a href="The FXSL Calculator.html" target="_top"><img alt="Table Of Contents" border="0" src="contents.gif" width="60" height="15"></a>&nbsp;</td></tr></table>
	</td>
		</tr>
	</table>
	  <p align="center">
		  <a href="http://sourceforge.net">
		   <img src="http://sourceforge.net/sflogo.php?group_id=53841&amp;type=6" 
		        width="210" height="62" border="0" alt="SourceForge.net Logo">
		  </a>
	  </p>
<a target="_top" href="#">
<img name=im src="http://t1.extreme-dm.com/i.gif" height=38
border=0 width=41 alt=""></a><script language="javascript"><!--
an=navigator.appName;d=document;function
pr(){d.write("<img src=\"http://t0.extreme-dm.com",
"/0.gif?tag=dimitren&j=y&srw="+srw+"&srb="+srb+"&",
"rs="+r+"&l="+escape(d.referrer)+"\" height=1 ",
"width=1>");}srb="na";srw="na";//-->
</script><script language="javascript1.2"><!--
s=screen;srw=s.width;an!="Netscape"?
srb=s.colorDepth:srb=s.pixelDepth;//-->
</script><script language="javascript"><!--
r=41;d.images?r=d.im.width:z=0;pr();//-->
</script><noscript><img height=1 width=1 alt="" 
src="http://t0.extreme-dm.com/0.gif?tag=dimitren&j=n"></noscript>


</body>
</html>

